import{j as e,m as T,A as fe}from"./motion-CuGjFofd.js";import{a as Pe,r as d,u as X,R as Ce,b as q,N as Te,c as Ee,B as $e}from"./vendor-Ctltn_FS.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var ee={},oe=Pe;ee.createRoot=oe.createRoot,ee.hydrateRoot=oe.hydrateRoot;const V={TELEGRAM:"telegram",WHATSAPP:"whatsapp",META5:"meta5"},ge=d.createContext(),Ae=({children:t})=>{const[s,r]=d.useState(V.TELEGRAM);return d.useEffect(()=>{Object.values(V).forEach(n=>document.body.classList.remove(`theme-${n}`)),document.body.classList.add(`theme-${s}`)},[s]),e.jsx(ge.Provider,{value:{theme:s,setTheme:r},children:t})},be=()=>d.useContext(ge);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ye=(...t)=>t.filter((s,r,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ue={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=d.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:m,...c},x)=>d.createElement("svg",{ref:x,...Ue,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:ye("lucide",o),...c},[...m.map(([u,b])=>d.createElement(u,b)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=(t,s)=>{const r=d.forwardRef(({className:n,...o},a)=>d.createElement(ze,{ref:a,iconNode:s,className:ye(`lucide-${Le(t)}`,n),...o}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=w("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=w("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=w("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=w("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=w("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=w("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=w("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=w("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=w("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=w("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=w("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=w("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=w("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=w("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=w("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=w("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=w("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=w("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=w("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=w("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=w("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=w("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),se="https://behtarin-forex-backend.onrender.com/api";function we(){let t=localStorage.getItem("push_user_id");return t||(t="user_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),localStorage.setItem("push_user_id",t)),t}function Q(){return"serviceWorker"in navigator&&"PushManager"in window}async function Je(){return Q()?!!await(await navigator.serviceWorker.ready).pushManager.getSubscription():!1}async function Ye(){return(await(await fetch(`${se}/push/vapid-public-key`)).json()).publicKey}function Xe(t){const s="=".repeat((4-t.length%4)%4),r=(t+s).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(r),o=new Uint8Array(n.length);for(let a=0;a<n.length;++a)o[a]=n.charCodeAt(a);return o}async function We(){if(!Q())throw new Error("Push notifications are not supported");if(await Notification.requestPermission()!=="granted")throw new Error("Notification permission denied");const s=await navigator.serviceWorker.register("/sw.js");await navigator.serviceWorker.ready;const r=await Ye(),n=Xe(r),o=await s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n}),a=we();if(!(await fetch(`${se}/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:o,userId:a})})).ok)throw new Error("Failed to subscribe on server");return console.log("âœ… Subscribed to push notifications"),!0}async function Ke(){if(!Q())return;const s=await(await navigator.serviceWorker.ready).pushManager.getSubscription();s&&await s.unsubscribe();const r=we();return await fetch(`${se}/push/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r})}),console.log("âœ… Unsubscribed from push notifications"),!0}function Ze(){const[t,s]=d.useState(!1);return e.jsx(T.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"mb-6",children:t?e.jsx("div",{className:"w-24 h-24 rounded-2xl shadow-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-3xl",children:"BF"})}):e.jsx("img",{src:"/logo.png",alt:"Behtarin Forex",className:"w-24 h-24 rounded-2xl shadow-lg object-cover",onError:()=>s(!0)})})}const Qe=({theme:t,icon:s,label:r,description:n,color:o,onClick:a})=>e.jsxs(T.button,{whileTap:{scale:.98},onClick:()=>a(t),className:"w-full p-4 rounded-2xl bg-white/5 border border-white/10 flex items-center gap-4 active:bg-white/10 transition-all",children:[e.jsx("div",{className:`p-3 rounded-xl ${o==="blue"?"bg-blue-500/20":o==="green"?"bg-green-500/20":"bg-yellow-500/20"}`,children:e.jsx(s,{size:24,className:`${o==="blue"?"text-blue-400":o==="green"?"text-green-400":"text-yellow-400"}`})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-white font-semibold text-base",children:r}),e.jsx("div",{className:"text-gray-500 text-xs",children:n})]}),e.jsx(De,{size:20,className:"text-gray-600"})]});function et(){const{setTheme:t}=be(),s=X(),[r,n]=d.useState(!1),[o,a]=d.useState(!1),[m,c]=d.useState(!1);d.useEffect(()=>{(async()=>{const y=Q();if(c(y),y){const p=await Je();n(p)}})()},[]);const x=l=>{t(l),s("/dashboard")},u=async()=>{a(!0);try{r?(await Ke(),n(!1)):(await We(),n(!0))}catch(l){console.error("Notification error:",l),alert(l.message||"Ø®Ø·Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†")}finally{a(!1)}},b=[{id:V.TELEGRAM,label:"Live Trade",description:"Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø²Ù†Ø¯Ù‡ - Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ",icon:H,color:"green"},{id:V.META5,label:"Signal Channel",description:"Ú©Ø§Ù†Ø§Ù„ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ù‡ØªØ±ÛŒÙ† ÙØ§Ø±Ú©Ø³",icon:J,color:"blue"}];return e.jsxs("div",{className:"min-h-[100dvh] bg-[#0e1621] flex flex-col pt-[env(safe-area-inset-top)] overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 py-8",children:[e.jsx(Ze,{}),e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Behtarin Forex"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ø¨Ù‡ØªØ±ÛŒÙ† ÙØ§Ø±Ú©Ø³"})]}),e.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[b.map((l,y)=>e.jsx(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+y*.1},children:e.jsx(Qe,{theme:l.id,icon:l.icon,label:l.label,description:l.description,color:l.color,onClick:x})},l.id)),e.jsx(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},style:{display:"block"},children:e.jsxs("button",{onClick:m?u:()=>alert("Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†ØŒ Ø§Ù¾ Ø±Ø§ Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ (Add to Home Screen)"),disabled:o,className:`w-full p-4 rounded-2xl border flex items-center gap-3 transition-all ${r?"bg-green-500/10 border-green-500/30":m?"bg-white/5 border-white/10":"bg-orange-500/10 border-orange-500/30"}`,children:[e.jsx("div",{className:`p-3 rounded-xl flex-shrink-0 ${r?"bg-green-500/20":m?"bg-gray-500/20":"bg-orange-500/20"}`,children:o?e.jsx(G,{size:24,className:"text-gray-400 animate-spin"}):r?e.jsx(K,{size:24,className:"text-green-400"}):e.jsx(Me,{size:24,className:m?"text-gray-400":"text-orange-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-white font-semibold text-base",children:r?"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ÙØ¹Ø§Ù„":m?"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ØºÛŒØ±ÙØ¹Ø§Ù„":"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†"}),e.jsx("div",{className:"text-gray-500 text-xs",children:r?"Ø¨Ø±Ø§ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯":m?"Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯":"Add to Home Screen Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-all flex-shrink-0 ${r?"bg-green-500":m?"bg-gray-600":"bg-orange-600"} relative`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full bg-white transition-all duration-200 ${r?"right-0.5":"right-6"}`})})]})})]})]}),e.jsxs("div",{className:"p-6 pb-[max(1.5rem,env(safe-area-inset-bottom))] flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"t.me/behtarinforex"}),e.jsx("button",{onClick:()=>s("/admin"),className:"p-2 rounded-lg hover:bg-white/5 transition",children:e.jsx(qe,{size:18,className:"text-gray-600"})})]})]})}const tt="modulepreload",st=function(t){return"/"+t},ce={},rt=function(s,r,n){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),c=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=Promise.allSettled(r.map(x=>{if(x=st(x),x in ce)return;ce[x]=!0;const u=x.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${b}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":tt,u||(l.as="script"),l.crossOrigin="",l.href=x,c&&l.setAttribute("nonce",c),document.head.appendChild(l),u)return new Promise((y,p)=>{l.addEventListener("load",y),l.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${x}`)))})}))}function a(m){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=m,window.dispatchEvent(c),!c.defaultPrevented)throw m}return o.then(m=>{for(const c of m||[])c.status==="rejected"&&a(c.reason);return s().catch(a)})},nt="https://behtarin-forex-backend.onrender.com/api".replace("/api","")||"http://localhost:5000";function ke(){const[t,s]=d.useState([]),[r,n]=d.useState(!1),[o,a]=d.useState(null);d.useEffect(()=>{let x=null;return(async()=>{try{const{io:b}=await rt(async()=>{const{io:l}=await import("./index-wSuXe0Ee.js");return{io:l}},[]);x=b(nt,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),x.on("connect",()=>{console.log("ðŸ”Œ Connected to trade server"),n(!0),x.emit("subscribe")}),x.on("disconnect",()=>{console.log("ðŸ”Œ Disconnected from trade server"),n(!1)}),x.on("trade_update",l=>{console.log("ðŸ“Š Trade update received:",l);const{event:y,data:p}=l,P={id:Date.now(),event:y,data:p,timestamp:new Date().toISOString()};s([P]),it(y)}),x.on("positions",l=>{console.log("ðŸ“Š Positions received:",l.length)}),a(x)}catch(b){console.error("Socket connection error:",b)}})(),()=>{x&&x.disconnect()}},[]);const m=d.useCallback(x=>{s(u=>u.filter(b=>b.id!==x))},[]),c=d.useCallback(()=>{s([])},[]);return{notifications:t,connected:r,dismissNotification:m,clearAll:c}}function it(t){try{const s=window.AudioContext||window.webkitAudioContext,r=new s,n=r.createOscillator(),o=r.createGain();n.connect(o),o.connect(r.destination),t==="position_opened"?(n.frequency.value=800,n.type="sine"):t==="position_closed"?(n.frequency.value=600,n.type="triangle"):(n.frequency.value=500,n.type="sine"),o.gain.setValueAtTime(.3,r.currentTime),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),n.start(r.currentTime),n.stop(r.currentTime+.3)}catch{}}const re="https://behtarin-forex-backend.onrender.com/api";async function de(){try{const t=await fetch(`${re}/trades/positions`);if(!t.ok)throw new Error("Failed to fetch positions");return await t.json()}catch(t){return console.error("API Error:",t),[]}}async function at(){try{const t=await fetch(`${re}/telegram/channel`);if(!t.ok)throw new Error("Failed to fetch channel info");return await t.json()}catch(t){return console.error("API Error:",t),null}}async function ot(t=20){try{const s=await fetch(`${re}/telegram/messages?limit=${t}`);if(!s.ok)throw new Error("Failed to fetch messages");return(await s.json()).messages||[]}catch(s){return console.error("API Error:",s),[]}}function Se(t){const s=(t==null?void 0:t.toUpperCase())||"";return s.includes("XAU")?.1:s.includes("JPY")?.01:1e-4}function lt(t,s,r,n=60){const o=Se(t);return(r==null?void 0:r.toUpperCase().includes("BUY"))?s-n*o:s+n*o}function ct(t,s,r,n=150){const o=Se(t);return(r==null?void 0:r.toUpperCase().includes("BUY"))?s+n*o:s-n*o}function dt(t){const s=(t==null?void 0:t.toUpperCase())||"";return s.includes("XAU")?2:s.includes("JPY")?3:5}function I(t,s){const r=dt(t);return(s==null?void 0:s.toFixed(r))||"---"}const xe=t=>{try{const s=localStorage.getItem("behtarin_closed_signals"),r=s?JSON.parse(s):[];t.closeTime=t.closeTime||Date.now(),r.some(o=>o.id===t.id&&o.closeTime===t.closeTime)||(r.unshift(t),r.length>100&&r.splice(100),localStorage.setItem("behtarin_closed_signals",JSON.stringify(r)),console.log("ðŸ“ Moved to history:",t.id))}catch(s){console.error("Error moving to history:",s)}},ue=t=>t!=null&&t.includes("XAU")?"Gold":t!=null&&t.includes("XAG")?"Silver":t!=null&&t.includes("EUR")?"EUR/USD":t!=null&&t.includes("GBP")?"GBP/USD":(t==null?void 0:t.replace(".ec",""))||"Unknown";function xt(){const t=X(),{notifications:s}=ke(),[r,n]=d.useState("active"),[o,a]=d.useState(()=>{try{const i=localStorage.getItem("behtarin_signals");return i?JSON.parse(i):{}}catch{return{}}}),[m,c]=d.useState(()=>{try{const i=localStorage.getItem("behtarin_closed_signals");return i?JSON.parse(i):[]}catch{return[]}}),[x,u]=d.useState([]),[b,l]=d.useState(!1);d.useRef(null);const y=d.useRef(new Set),p=d.useRef([]),P=d.useRef(new Map);d.useEffect(()=>{try{localStorage.setItem("behtarin_signals",JSON.stringify(o))}catch(i){console.error("Error saving signals:",i)}},[o]),d.useEffect(()=>{if(r==="history")try{const i=localStorage.getItem("behtarin_closed_signals");c(i?JSON.parse(i):[])}catch{c([])}},[r]);const z=async()=>{l(!0);const i=await de(),k=new Set;i&&i.length>0&&i.forEach($=>{var g;const E=$.magic||$.comment||((g=$.id)==null?void 0:g.toString().slice(-8));k.add(E)}),a($=>{const E={...$};let g=!1;return i&&i.length>0&&i.forEach(h=>{var C,M;const j=h.magic||h.comment||((C=h.id)==null?void 0:C.toString().slice(-8));if(!E[j]){const S=(M=h.type)==null?void 0:M.includes("BUY");E[j]={id:j,symbol:h.symbol,type:S?"buy":"sell",isBuy:S,openPrice:h.openPrice,volume:h.volume,openTime:h.time||Date.now(),status:"active",actions:[],liveProfit:h.profit||0,livePrice:h.currentPrice,liveVolume:h.volume},g=!0}}),Object.keys(E).forEach(h=>{if(!k.has(h)){const j=E[h];j.status="closed",j.closeTime=j.closeTime||Date.now(),j.totalProfit=j.closeProfit||j.liveProfit||0,xe(j),delete E[h],g=!0}}),g?E:$}),l(!1)};d.useEffect(()=>{z()},[]),d.useEffect(()=>{const i=()=>{document.visibilityState==="visible"&&z()};return document.addEventListener("visibilitychange",i),()=>document.removeEventListener("visibilitychange",i)},[]),d.useEffect(()=>{const i=async()=>{const $=await de();if($){const E=new Map;$.forEach(g=>{var j,C;const h=g.magic||g.comment||((j=g.id)==null?void 0:j.toString().slice(-8));E.set(h,{fullId:((C=g.id)==null?void 0:C.toString())||"",volume:g.volume,profit:g.profit,price:g.currentPrice})}),$.forEach(g=>{var M,S;const h=g.magic||g.comment||((M=g.id)==null?void 0:M.toString().slice(-8)),j=((S=g.id)==null?void 0:S.toString())||"",C=P.current.get(h);if(C&&C.volume>g.volume+.001){const A=C.volume-g.volume,R=p.current.findIndex(L=>{const _=L.positionId===j||L.positionId.endsWith(h),O=Math.abs(L.volume-A)<.005,F=Date.now()-L.timestamp<15e3;return _&&O&&F});let N=R!==-1?p.current[R].profit:(C.profit||0)*(A/C.volume),D=R!==-1?p.current[R].price:g.currentPrice;R!==-1&&p.current.splice(R,1),a(L=>L[h]?{...L,[h]:{...L[h],actions:[...L[h].actions||[],{type:"partial_close",closedVolume:A.toFixed(2),remainingVolume:g.volume.toFixed(2),profit:N,price:D,timestamp:new Date().toISOString()}]}}:L)}a(A=>A[h]?{...A,[h]:{...A[h],livePrice:g.currentPrice,liveProfit:g.profit,liveVolume:g.volume}}:A)}),P.current.size>0&&P.current.forEach((g,h)=>{if(!E.has(h)){const j=p.current.findIndex(S=>S.positionId.endsWith(h)&&Date.now()-S.timestamp<15e3);let C=j!==-1?p.current[j].profit:g.profit||0,M=j!==-1?p.current[j].price:g.price;j!==-1&&p.current.splice(j,1),a(S=>{var O;if(!S[h]||S[h].status==="closed")return S;const A=S[h].actions||[],N=A.reduce((F,W)=>F+(W.profit||0),0)+C,D={...S[h],status:"closed",closePrice:M,closeProfit:N,totalProfit:N,closeTime:new Date().toISOString(),actions:[...A,{type:"closed",price:M,profit:C,volume:(O=g.volume)==null?void 0:O.toFixed(2),timestamp:new Date().toISOString()}]};xe(D);const{[h]:L,..._}=S;return _})}}),P.current=E,u($)}};i();const k=setInterval(i,2e3);return()=>clearInterval(k)},[]),d.useEffect(()=>{var i,k,$,E,g,h,j,C,M,S,A,R;if(s.length>0){const N=s[0],D=`${N.event}-${(i=N.data)==null?void 0:i.id}-${N.timestamp}`;if(y.current.has(D))return;y.current.add(D);const L=((k=N.data)==null?void 0:k.magic)||(($=N.data)==null?void 0:$.comment)||((g=(E=N.data)==null?void 0:E.id)==null?void 0:g.toString().slice(-8))||"Unknown";if(N.event==="position_opened"){const _=(j=(h=N.data)==null?void 0:h.type)==null?void 0:j.includes("BUY");a(O=>{var F,W,ne,ie,ae;return{...O,[L]:{id:L,symbol:(F=N.data)==null?void 0:F.symbol,type:_?"buy":"sell",isBuy:_,openPrice:(W=N.data)==null?void 0:W.openPrice,volume:(ne=N.data)==null?void 0:ne.volume,openTime:N.timestamp,status:"active",actions:[],liveProfit:0,livePrice:(ie=N.data)==null?void 0:ie.openPrice,liveVolume:(ae=N.data)==null?void 0:ae.volume}}})}else N.event==="deal_closed"&&(p.current.push({positionId:((M=(C=N.data)==null?void 0:C.positionId)==null?void 0:M.toString())||"",profit:((S=N.data)==null?void 0:S.profit)||0,volume:((A=N.data)==null?void 0:A.volume)||0,price:(R=N.data)==null?void 0:R.price,timestamp:Date.now()}),p.current.length>20&&p.current.splice(0,p.current.length-20))}},[s]);const U=Object.values(o),B=U.reduce((i,k)=>i+(k.liveProfit||0),0),f=m.reduce((i,k)=>i+(k.totalProfit||0),0),v=()=>{confirm("ØªÙ…Ø§Ù… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾Ø§Ú© Ø´ÙˆØ¯ØŸ")&&(localStorage.removeItem("behtarin_closed_signals"),c([]))};return e.jsxs("div",{className:"min-h-[100dvh] flex flex-col bg-[#0e1621]",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-2 hover:bg-white/10 rounded-lg transition active:scale-95",children:e.jsx(Z,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:"ðŸ“Š Signal Tracker"}),e.jsxs("div",{className:"text-[11px] text-gray-400",children:[U.length," ÙØ¹Ø§Ù„ â€¢ ",m.length," Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡"]})]})]}),e.jsx("button",{onClick:z,disabled:b,className:"p-2 hover:bg-white/10 rounded-lg transition active:scale-95",children:e.jsx(je,{size:20,className:`text-gray-400 ${b?"animate-spin":""}`})})]}),e.jsxs("div",{className:"flex bg-[#17212b] border-b border-[#0e1621] flex-shrink-0",children:[e.jsxs("button",{onClick:()=>n("active"),className:`flex-1 py-3 text-sm font-medium transition-all relative ${r==="active"?"text-green-400":"text-gray-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Oe,{size:16}),e.jsxs("span",{children:["ÙØ¹Ø§Ù„ (",U.length,")"]})]}),r==="active"&&e.jsx(T.div,{layoutId:"tab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-500"})]}),e.jsxs("button",{onClick:()=>n("history"),className:`flex-1 py-3 text-sm font-medium transition-all relative ${r==="history"?"text-blue-400":"text-gray-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(te,{size:16}),e.jsxs("span",{children:["ØªØ§Ø±ÛŒØ®Ú†Ù‡ (",m.length,")"]})]}),r==="history"&&e.jsx(T.div,{layoutId:"tab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500"})]})]}),r==="active"&&U.length>0&&e.jsx("div",{className:`px-4 py-2 ${B>=0?"bg-green-500/10":"bg-red-500/10"} flex-shrink-0`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Ø³ÙˆØ¯/Ø²ÛŒØ§Ù† Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ:"}),e.jsxs("span",{className:`font-bold ${B>=0?"text-green-400":"text-red-400"}`,children:[B>=0?"+":"",B.toFixed(2),"$"]})]})}),r==="history"&&m.length>0&&e.jsxs("div",{className:`px-4 py-2 ${f>=0?"bg-green-500/10":"bg-red-500/10"} flex items-center justify-between flex-shrink-0`,children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Ù…Ø¬Ù…ÙˆØ¹ Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`font-bold ${f>=0?"text-green-400":"text-red-400"}`,children:[f>=0?"+":"",f.toFixed(2),"$"]}),e.jsx("button",{onClick:v,className:"p-1 hover:bg-red-500/20 rounded transition",children:e.jsx(ve,{size:14,className:"text-red-400"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 pb-[max(1rem,env(safe-area-inset-bottom))]",children:e.jsx(fe,{mode:"wait",children:r==="active"?e.jsx(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-3",children:U.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-500",children:[e.jsx(K,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Ù…Ø¹Ø§Ù…Ù„Ù‡ ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Ù…Ù†ØªØ¸Ø± Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯..."})]}):U.map(i=>{var k;return e.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-[#182533] rounded-xl overflow-hidden border border-white/5",children:[e.jsx("div",{className:`p-3 ${i.isBuy?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.isBuy?e.jsx(H,{size:18,className:"text-green-400"}):e.jsx(Y,{size:18,className:"text-red-400"}),e.jsx("span",{className:"text-white font-bold",children:ue(i.symbol)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${i.isBuy?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:i.isBuy?"BUY":"SELL"})]}),e.jsxs("span",{className:"text-gray-500 text-xs font-mono",children:["#",i.id]})]})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Entry"}),e.jsx("span",{className:"text-white",children:I(i.openPrice,i.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Current"}),e.jsx("span",{className:"text-white",children:I(i.livePrice,i.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Volume"}),e.jsxs("span",{className:"text-white",children:[((k=i.liveVolume)==null?void 0:k.toFixed(2))||i.volume," lot"]})]})]}),e.jsx("div",{className:`text-center py-2 rounded-lg ${(i.liveProfit||0)>=0?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsxs("span",{className:`font-bold text-lg ${(i.liveProfit||0)>=0?"text-green-400":"text-red-400"}`,children:[(i.liveProfit||0)>=0?"+":"",(i.liveProfit||0).toFixed(2),"$"]})})]})]},i.id)})},"active"):e.jsx(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-3",children:m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-500",children:[e.jsx(te,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯"})]}):m.map((i,k)=>e.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:k*.03},className:"bg-[#182533] rounded-xl overflow-hidden border border-white/5",children:[e.jsx("div",{className:"p-3 bg-[#1c2733]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.isBuy?e.jsx(H,{size:16,className:"text-green-400"}):e.jsx(Y,{size:16,className:"text-red-400"}),e.jsx("span",{className:"text-white font-medium text-sm",children:ue(i.symbol)}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${i.isBuy?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:i.isBuy?"BUY":"SELL"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-gray-500 text-[10px] font-mono block",children:["#",i.id]}),e.jsx("span",{className:"text-gray-600 text-[10px]",children:new Date(i.closeTime).toLocaleDateString("fa-IR")})]})]})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Entry"}),e.jsx("span",{className:"text-white",children:I(i.openPrice,i.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Close"}),e.jsx("span",{className:"text-white",children:I(i.closePrice,i.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Volume"}),e.jsxs("span",{className:"text-white",children:[i.volume," lot"]})]})]}),e.jsx("div",{className:`text-center py-2 rounded-lg ${(i.totalProfit||0)>=0?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsxs("span",{className:`font-bold ${(i.totalProfit||0)>=0?"text-green-400":"text-red-400"}`,children:[(i.totalProfit||0)>=0?"+":"",(i.totalProfit||0).toFixed(2),"$"]})})]})]},i.id+"-"+k))},"history")})})]})}function ut({post:t,onReplyClick:s,isHighlighted:r}){const n=t.replyTo&&t.replyTo.text;return e.jsxs("div",{id:`msg-${t.id}`,className:`bg-[#182533] rounded-xl overflow-hidden transition-all duration-500 ${n?"border-l-4 border-l-blue-500 border border-blue-500/20":"border border-white/5"} ${r?"ring-2 ring-yellow-500 bg-yellow-500/10":""}`,children:[n&&e.jsxs("div",{className:"px-3 py-2 bg-blue-500/10 border-b border-blue-500/20 cursor-pointer hover:bg-blue-500/20 transition-colors active:bg-blue-500/30 flex items-start gap-2",onClick:()=>s(t.replyTo.id),children:[e.jsx(He,{size:14,className:"text-blue-400 rotate-180 flex-shrink-0 mt-1"}),e.jsx("div",{className:"flex-1 min-w-0 bg-[#0e1621] rounded px-2 py-1.5 border-l-2 border-blue-400",children:e.jsx("p",{className:"text-xs text-gray-400 line-clamp-4 leading-relaxed",dir:"auto",children:t.replyTo.text})}),e.jsx("span",{className:"text-[10px] text-blue-400 flex-shrink-0 mt-1",children:"â†©ï¸"})]}),e.jsx("div",{className:"p-4",children:e.jsx("pre",{className:"text-gray-200 text-sm whitespace-pre-wrap font-sans leading-relaxed",dir:"auto",children:t.text})}),(t.time||t.views)&&e.jsxs("div",{className:"px-4 py-2 border-t border-white/5 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:t.time}),t.views&&e.jsxs("span",{children:["ðŸ‘ ",t.views]})]})]})}function mt(){const t=X(),[s,r]=d.useState([]),[n,o]=d.useState(null),[a,m]=d.useState(!0),[c,x]=d.useState(!1),[u,b]=d.useState(!1),[l,y]=d.useState(null),p=d.useRef(null),P=d.useRef(null),z=()=>{var v;(v=P.current)==null||v.scrollIntoView({behavior:"smooth"})},U=d.useCallback(v=>{if(!v)return;const i=document.getElementById(`msg-${v}`);i&&(i.scrollIntoView({behavior:"smooth",block:"center"}),y(v),setTimeout(()=>y(null),2e3))},[]),B=()=>{if(p.current){const{scrollTop:v,scrollHeight:i,clientHeight:k}=p.current;b(i-v-k>100)}},f=async(v=!1)=>{v?m(!0):x(!0);try{const[i,k]=await Promise.all([ot(30),at()]);i&&i.length>0&&(r(i),v&&setTimeout(z,150)),k&&o(k)}catch(i){console.error("Error:",i)}finally{m(!1),x(!1)}};return d.useEffect(()=>{f(!0);const v=setInterval(()=>f(!1),5e3);return()=>clearInterval(v)},[]),e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621] safe-top relative",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(Z,{size:22,className:"text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(J,{size:18,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:(n==null?void 0:n.title)||"Signal Channel"}),e.jsxs("div",{className:"text-[11px] text-gray-400 flex items-center gap-2",children:[e.jsxs("span",{children:["@",(n==null?void 0:n.username)||"behtarinforex"]}),(n==null?void 0:n.memberCount)>0&&e.jsxs("span",{className:"text-blue-400",children:["â€¢ ",n.memberCount.toLocaleString()," Ø¹Ø¶Ùˆ"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(!1),disabled:c,className:"p-2 hover:bg-white/10 rounded-full transition disabled:opacity-50",children:c?e.jsx(G,{size:18,className:"text-gray-400 animate-spin"}):e.jsx(je,{size:18,className:"text-gray-400"})}),e.jsx("a",{href:`https://t.me/${(n==null?void 0:n.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-blue-600",children:"Join"})]})]}),e.jsx("div",{ref:p,onScroll:B,className:"flex-1 overflow-y-auto p-3 space-y-3",children:a?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(G,{size:32,className:"text-blue-400 animate-spin"})}):s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-10",children:"Ù‡ÛŒÚ† Ù¾ÛŒØ§Ù…ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center py-2",children:e.jsx("a",{href:`https://t.me/${(n==null?void 0:n.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 text-xs hover:underline",children:"â† Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…"})}),s.map((v,i)=>e.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.01},children:e.jsx(ut,{post:v,onReplyClick:U,isHighlighted:l===v.id})},v.id)),e.jsx("div",{ref:P})]})}),u&&e.jsx("button",{onClick:z,className:"absolute bottom-24 right-4 p-3 bg-[#17212b] border border-white/10 rounded-full shadow-lg hover:bg-[#1c2733] transition z-20",children:e.jsx(Be,{size:20,className:"text-gray-400"})}),e.jsx("div",{className:"bg-[#17212b] border-t border-[#0e1621] p-3 pb-[max(0.75rem,env(safe-area-inset-bottom))]",children:e.jsxs("a",{href:`https://t.me/${(n==null?void 0:n.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl py-3 text-white font-medium",children:[e.jsx(J,{size:18}),e.jsx("span",{children:"Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„"})]})})]})}function ht(){const{theme:t}=be();return e.jsx("div",{className:"bg-[#0e1621] min-h-screen w-full flex justify-center items-start",children:e.jsxs("div",{className:"min-h-screen w-full max-w-lg mx-auto overflow-hidden bg-[#0e1621]",children:[t===V.TELEGRAM&&e.jsx(xt,{}),t===V.META5&&e.jsx(mt,{})]})})}const me="https://behtarin-forex-backend.onrender.com/api";function pt(){const t=X(),[s,r]=d.useState("signal"),[n,o]=d.useState(""),[a,m]=d.useState(!1),[c,x]=d.useState(!1),[u,b]=d.useState(null),[l,y]=d.useState({symbol:"XAUUSD",tradeType:"buy",entries:"",stopLoss:"",targets:""}),[p,P]=d.useState(""),z=f=>{f.preventDefault(),n.length>0&&m(!0)},U=async()=>{x(!0),b(null);try{const v=await(await fetch(`${me}/telegram/send-signal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,password:n})})).json();v.success?(b({type:"success",text:"Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…"}),y({symbol:"XAUUSD",tradeType:"buy",entries:"",stopLoss:"",targets:""})):b({type:"error",text:v.error||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„"})}catch{b({type:"error",text:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±"})}finally{x(!1)}},B=async()=>{x(!0),b(null);try{const v=await(await fetch(`${me}/telegram/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:p,password:n})})).json();v.success?(b({type:"success",text:"Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…"}),P("")):b({type:"error",text:v.error||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„"})}catch{b({type:"error",text:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±"})}finally{x(!1)}};return a?e.jsxs("div",{className:"min-h-screen bg-[#0e1621] safe-top",children:[e.jsx("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(Z,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:"ðŸ” Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª"}),e.jsx("div",{className:"text-[11px] text-gray-400",children:"Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ú©Ø§Ù†Ø§Ù„"})]})]})}),e.jsxs("div",{className:"flex border-b border-white/10",children:[e.jsxs("button",{onClick:()=>r("signal"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition ${s==="signal"?"text-blue-400 border-b-2 border-blue-400":"text-gray-500"}`,children:[e.jsx(Ge,{size:16})," Ø³ÛŒÚ¯Ù†Ø§Ù„"]}),e.jsxs("button",{onClick:()=>r("message"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition ${s==="message"?"text-blue-400 border-b-2 border-blue-400":"text-gray-500"}`,children:[e.jsx(Ve,{size:16})," Ù¾ÛŒØ§Ù…"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[u&&e.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-xl flex items-center gap-2 ${u.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[u.type==="success"?e.jsx(Ie,{size:18}):e.jsx(Ne,{size:18}),e.jsx("span",{className:"text-sm",children:u.text})]}),s==="signal"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†Ù…Ø§Ø¯"}),e.jsxs("select",{value:l.symbol,onChange:f=>y({...l,symbol:f.target.value}),className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD (Ø·Ù„Ø§)"}),e.jsx("option",{value:"EURUSD",children:"EURUSD (ÛŒÙˆØ±Ùˆ/Ø¯Ù„Ø§Ø±)"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD (Ù¾ÙˆÙ†Ø¯/Ø¯Ù„Ø§Ø±)"}),e.jsx("option",{value:"XAGUSD",children:"XAGUSD (Ù†Ù‚Ø±Ù‡)"}),e.jsx("option",{value:"USDJPY",children:"USDJPY (Ø¯Ù„Ø§Ø±/ÛŒÙ†)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†ÙˆØ¹ Ù…Ø¹Ø§Ù…Ù„Ù‡"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>y({...l,tradeType:"buy"}),className:`flex-1 py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition ${l.tradeType==="buy"?"bg-green-500 text-white":"bg-[#17212b] text-gray-400 border border-white/10"}`,children:[e.jsx(H,{size:18})," Ø®Ø±ÛŒØ¯ (BUY)"]}),e.jsxs("button",{onClick:()=>y({...l,tradeType:"sell"}),className:`flex-1 py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition ${l.tradeType==="sell"?"bg-red-500 text-white":"bg-[#17212b] text-gray-400 border border-white/10"}`,children:[e.jsx(Y,{size:18})," ÙØ±ÙˆØ´ (SELL)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†Ù‚Ø§Ø· ÙˆØ±ÙˆØ¯"}),e.jsx("input",{type:"text",value:l.entries,onChange:f=>y({...l,entries:f.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2650 Ùˆ 2648",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ø§Ø³ØªØ§Ù¾ Ù„Ø§Ø³"}),e.jsx("input",{type:"text",value:l.stopLoss,onChange:f=>y({...l,stopLoss:f.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2645",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"ØªØ§Ø±Ú¯Øªâ€ŒÙ‡Ø§ (Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯)"}),e.jsx("input",{type:"text",value:l.targets,onChange:f=>y({...l,targets:f.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2655, 2660, 2665, 2670",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsx("button",{onClick:U,disabled:c||!l.entries||!l.stopLoss||!l.targets,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 text-white font-medium py-4 rounded-xl transition flex items-center justify-center gap-2",children:c?e.jsx(G,{size:20,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(J,{size:18})," Ø§Ø±Ø³Ø§Ù„ Ø³ÛŒÚ¯Ù†Ø§Ù„"]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù…ØªÙ† Ù¾ÛŒØ§Ù…"}),e.jsx("textarea",{value:p,onChange:f=>P(f.target.value),placeholder:"Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...",rows:6,className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 resize-none",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["âœ… ØªØ§Ø±Ú¯Øª Û± Ø²Ø¯Ù‡ Ø´Ø¯!","âœ… ØªØ§Ø±Ú¯Øª Û² Ø²Ø¯Ù‡ Ø´Ø¯!","âŒ Ø§Ø³ØªØ§Ù¾ Ø²Ø¯Ù‡ Ø´Ø¯","ðŸ“Š Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø§Ø²Ø§Ø±...","ðŸ”’ Ø§Ø³ØªØ§Ù¾ Ø¨Ù‡ ÙˆØ±ÙˆØ¯ Ù…Ù†ØªÙ‚Ù„ Ø´Ø¯"].map(f=>e.jsx("button",{onClick:()=>P(p+(p?`
`:"")+f),className:"px-3 py-1.5 bg-[#17212b] border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/5",children:f},f))})]}),e.jsx("button",{onClick:B,disabled:c||!p.trim(),className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 text-white font-medium py-4 rounded-xl transition flex items-center justify-center gap-2",children:c?e.jsx(G,{size:20,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(J,{size:18})," Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…"]})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-[#0e1621] flex flex-col items-center justify-center p-6",children:e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Fe,{size:32,className:"text-blue-400"})}),e.jsx("h1",{className:"text-white text-xl font-bold",children:"Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsx("input",{type:"password",value:n,onChange:f=>o(f.target.value),placeholder:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 rounded-xl transition",children:"ÙˆØ±ÙˆØ¯"})]}),e.jsx("button",{onClick:()=>t("/login"),className:"w-full mt-4 text-gray-500 text-sm hover:text-gray-400",children:"Ø¨Ø§Ø²Ú¯Ø´Øª"})]})})}function ft(){const t=X(),[s,r]=d.useState(()=>{try{const c=localStorage.getItem("behtarin_closed_signals");return c?JSON.parse(c):[]}catch{return[]}}),n=s.reduce((c,x)=>c+(x.totalProfit||0),0),o=s.reduce((c,x)=>{const u=new Date(x.closeTime||x.openTime).toLocaleDateString("fa-IR");return c[u]||(c[u]=[]),c[u].push(x),c},{}),a=()=>{confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ ØªÙ…Ø§Ù… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯.")&&(localStorage.removeItem("behtarin_closed_signals"),r([]))},m=c=>c!=null&&c.includes("XAU")?"Gold":c!=null&&c.includes("XAG")?"Silver":c!=null&&c.includes("EUR")?"EUR/USD":c!=null&&c.includes("GBP")?"GBP/USD":(c==null?void 0:c.replace(".ec",""))||"Unknown";return e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621]",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(Z,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-[15px] flex items-center gap-2",children:[e.jsx(le,{size:18}),"ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø¹Ø§Ù…Ù„Ø§Øª"]}),e.jsxs("div",{className:"text-[11px] text-gray-400",children:[s.length," Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡"]})]})]}),s.length>0&&e.jsx("button",{onClick:a,className:"p-2 hover:bg-red-500/20 rounded-lg transition",children:e.jsx(ve,{size:18,className:"text-red-400"})})]}),s.length>0&&e.jsx("div",{className:`px-4 py-3 ${n>=0?"bg-green-500/10":"bg-red-500/10"} border-b border-[#0e1621]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Ù…Ø¬Ù…ÙˆØ¹ Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†:"}),e.jsxs("span",{className:`font-bold text-lg ${n>=0?"text-green-400":"text-red-400"}`,children:[n>=0?"+":"",n.toFixed(2),"$"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(le,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{children:"Ù‡Ù†ÙˆØ² Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒØ§ÛŒ Ø¨Ø³ØªÙ‡ Ù†Ø´Ø¯Ù‡"})]}):Object.entries(o).sort(([c],[x])=>new Date(x)-new Date(c)).map(([c,x])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Re,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:c})]}),e.jsx("div",{className:"space-y-2",children:x.map((u,b)=>e.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-[#182533] rounded-xl p-3 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${u.isBuy?"bg-green-500/20":"bg-red-500/20"}`,children:u.isBuy?e.jsx(H,{size:14,className:"text-green-400"}):e.jsx(Y,{size:14,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium text-sm",children:m(u.symbol)}),e.jsx("span",{className:`ml-2 text-xs ${u.isBuy?"text-green-400":"text-red-400"}`,children:u.isBuy?"BUY":"SELL"})]})]}),e.jsxs("span",{className:"text-gray-500 text-xs font-mono",children:["#",u.id]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Entry"}),e.jsx("span",{className:"text-white",children:I(u.openPrice,u.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Close"}),e.jsx("span",{className:"text-white",children:I(u.closePrice,u.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Volume"}),e.jsxs("span",{className:"text-white",children:[u.volume," lot"]})]})]}),e.jsx("div",{className:`text-center py-2 rounded-lg ${(u.totalProfit||0)>=0?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsxs("span",{className:`font-bold ${(u.totalProfit||0)>=0?"text-green-400":"text-red-400"}`,children:[(u.totalProfit||0)>=0?"+":"",(u.totalProfit||0).toFixed(2),"$"]})}),u.actions&&u.actions.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-white/5",children:[e.jsx("div",{className:"text-[10px] text-gray-500 mb-1",children:"Ø¹Ù…Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§:"}),e.jsx("div",{className:"space-y-1",children:u.actions.map((l,y)=>{var p;return e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsxs("span",{className:"text-gray-400",children:[l.type==="partial"?"Partial Close":"Full Close"," (",l.volume," lot)"]}),e.jsxs("span",{className:l.profit>=0?"text-green-400":"text-red-400",children:[l.profit>=0?"+":"",(p=l.profit)==null?void 0:p.toFixed(2),"$"]})]},y)})})]})]},u.id+"-"+b))})]},c))})]})}const he=60,pe=150;function gt({notifications:t,onDismiss:s}){return e.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-2 max-w-sm w-full pointer-events-none",children:e.jsx(fe,{children:t.map(r=>e.jsx(T.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:"pointer-events-auto",children:e.jsx(bt,{notification:r,onDismiss:s})},r.id))})})}function bt({notification:t,onDismiss:s}){var z,U;const{id:r,type:n,event:o,data:a,timestamp:m}=t,x=(()=>{var B,f;switch(o){case"position_opened":return{icon:(B=a.type)!=null&&B.includes("BUY")?H:Y,color:(f=a.type)!=null&&f.includes("BUY")?"green":"red",title:"ðŸš€ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø² Ø´Ø¯!",titleEn:"New Position Opened!"};case"position_closed":return{icon:te,color:a.profit>=0?"green":"red",title:a.profit>=0?"âœ… Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø§ Ø³ÙˆØ¯ Ø¨Ø³ØªÙ‡ Ø´Ø¯!":"âŒ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø§ Ø¶Ø±Ø± Ø¨Ø³ØªÙ‡ Ø´Ø¯!",titleEn:a.profit>=0?"Position Closed (Profit)":"Position Closed (Loss)"};case"position_updated":return{icon:_e,color:"yellow",title:"ðŸ“ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯",titleEn:"Position Updated"};case"order_placed":return{icon:K,color:"blue",title:"ðŸ“‹ Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯",titleEn:"Order Placed"};default:return{icon:K,color:"gray",title:"Trade Update",titleEn:"Trade Update"}}})(),u=x.icon,b=(z=a.type)==null?void 0:z.includes("BUY"),l=parseFloat(a.openPrice)||0,y=a.stopLoss||lt(a.symbol,l,a.type,he),p=a.takeProfit||ct(a.symbol,l,a.type,pe),P={green:"bg-green-500/10 border-green-500/30 text-green-500",red:"bg-red-500/10 border-red-500/30 text-red-500",yellow:"bg-yellow-500/10 border-yellow-500/30 text-yellow-500",blue:"bg-blue-500/10 border-blue-500/30 text-blue-500",gray:"bg-gray-500/10 border-gray-500/30 text-gray-500"};return e.jsxs("div",{className:`bg-[#1a1a1a] border ${P[x.color].split(" ")[1]} rounded-xl shadow-2xl overflow-hidden backdrop-blur-lg`,children:[e.jsxs("div",{className:`px-4 py-2 flex items-center justify-between ${P[x.color].split(" ")[0]}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{size:18,className:P[x.color].split(" ")[2]}),e.jsx("span",{className:"font-bold text-sm text-white",children:x.title})]}),e.jsx("button",{onClick:()=>s(r),className:"p-1 hover:bg-white/10 rounded transition",children:e.jsx(Ne,{size:14,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-xl text-white",children:a.symbol}),e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${b?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:b?"BUY":"SELL"})]}),a.volume&&e.jsxs("span",{className:"text-sm text-gray-400 font-mono",children:[a.volume," lot"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-black/40 rounded-lg p-2 border border-white/10",children:[e.jsx("div",{className:"text-gray-400 text-[10px] uppercase mb-1",children:"Entry"}),e.jsx("div",{className:"font-mono text-white font-bold",children:I(a.symbol,l)})]}),e.jsxs("div",{className:"bg-red-500/10 rounded-lg p-2 border border-red-500/20",children:[e.jsxs("div",{className:"text-red-400 text-[10px] uppercase mb-1 flex items-center justify-between",children:[e.jsx("span",{children:"SL"}),e.jsxs("span",{className:"text-[8px] text-red-300",children:[he," pip"]})]}),e.jsx("div",{className:"font-mono text-red-400 font-bold",children:I(a.symbol,y)})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-lg p-2 border border-green-500/20",children:[e.jsxs("div",{className:"text-green-400 text-[10px] uppercase mb-1 flex items-center justify-between",children:[e.jsx("span",{children:"TP"}),e.jsxs("span",{className:"text-[8px] text-green-300",children:[pe," pip"]})]}),e.jsx("div",{className:"font-mono text-green-400 font-bold",children:I(a.symbol,p)})]})]}),a.profit!==void 0&&e.jsxs("div",{className:`text-center py-2 rounded-lg ${a.profit>=0?"bg-green-500/20":"bg-red-500/20"}`,children:[a.currentPrice&&e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Current: ",e.jsx("span",{className:"text-yellow-500 font-mono",children:I(a.symbol,a.currentPrice)})]}),e.jsxs("span",{className:`font-mono font-bold text-lg ${a.profit>=0?"text-green-500":"text-red-500"}`,children:[a.profit>=0?"+":"",(U=a.profit)==null?void 0:U.toFixed(2),"$"]})]}),e.jsx("div",{className:"text-[10px] text-gray-500 text-right",children:new Date(m).toLocaleTimeString("fa-IR")})]})]})}function yt(){const{notifications:t,connected:s,dismissNotification:r}=ke();return e.jsxs("div",{className:"antialiased",children:[e.jsx(gt,{notifications:t,onDismiss:r}),s&&e.jsxs("div",{className:"fixed bottom-4 left-4 z-50 flex items-center gap-2 bg-green-500/20 text-green-500 text-xs px-3 py-1.5 rounded-full border border-green-500/30",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live Connected"]}),e.jsxs(Ce,{children:[e.jsx(q,{path:"/login",element:e.jsx(et,{})}),e.jsx(q,{path:"/dashboard",element:e.jsx(ht,{})}),e.jsx(q,{path:"/admin",element:e.jsx(pt,{})}),e.jsx(q,{path:"/history",element:e.jsx(ft,{})}),e.jsx(q,{path:"*",element:e.jsx(Te,{to:"/login",replace:!0})})]})]})}function jt(){return e.jsx(Ae,{children:e.jsx(yt,{})})}ee.createRoot(document.getElementById("root")).render(e.jsx(Ee.StrictMode,{children:e.jsx($e,{children:e.jsx(jt,{})})}));
