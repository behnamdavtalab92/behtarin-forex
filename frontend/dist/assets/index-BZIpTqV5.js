import{j as e,m as L,A as ae}from"./motion-CuGjFofd.js";import{a as he,r as m,u as F,R as pe,b as I,N as fe,c as ge,B as be}from"./vendor-Ctltn_FS.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();var G={},ee=he;G.createRoot=ee.createRoot,G.hydrateRoot=ee.hydrateRoot;const D={TELEGRAM:"telegram",WHATSAPP:"whatsapp",META5:"meta5"},oe=m.createContext(),ye=({children:t})=>{const[s,n]=m.useState(D.TELEGRAM);return m.useEffect(()=>{Object.values(D).forEach(r=>document.body.classList.remove(`theme-${r}`)),document.body.classList.add(`theme-${s}`)},[s]),e.jsx(oe.Provider,{value:{theme:s,setTheme:n},children:t})},le=()=>m.useContext(oe);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ce=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=m.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:i,iconNode:p,...x},a)=>m.createElement("svg",{ref:a,...ve,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:ce("lucide",l),...x},[...p.map(([u,g])=>m.createElement(u,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=(t,s)=>{const n=m.forwardRef(({className:r,...l},i)=>m.createElement(Ne,{ref:i,iconNode:s,className:ce(`lucide-${je(t)}`,r),...l}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=w("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=w("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=w("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=w("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=w("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=w("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=w("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=w("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=w("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=w("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=w("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=w("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=w("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=w("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=w("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=w("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=w("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=w("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=w("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=w("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=w("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),X="https://behtarin-forex-backend.onrender.com/api";function xe(){let t=localStorage.getItem("push_user_id");return t||(t="user_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),localStorage.setItem("push_user_id",t)),t}function Y(){return"serviceWorker"in navigator&&"PushManager"in window}async function Ie(){return Y()?!!await(await navigator.serviceWorker.ready).pushManager.getSubscription():!1}async function Re(){return(await(await fetch(`${X}/push/vapid-public-key`)).json()).publicKey}function _e(t){const s="=".repeat((4-t.length%4)%4),n=(t+s).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),l=new Uint8Array(r.length);for(let i=0;i<r.length;++i)l[i]=r.charCodeAt(i);return l}async function Fe(){if(!Y())throw new Error("Push notifications are not supported");if(await Notification.requestPermission()!=="granted")throw new Error("Notification permission denied");const s=await navigator.serviceWorker.register("/sw.js");await navigator.serviceWorker.ready;const n=await Re(),r=_e(n),l=await s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r}),i=xe();if(!(await fetch(`${X}/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:l,userId:i})})).ok)throw new Error("Failed to subscribe on server");return console.log("âœ… Subscribed to push notifications"),!0}async function Oe(){if(!Y())return;const s=await(await navigator.serviceWorker.ready).pushManager.getSubscription();s&&await s.unsubscribe();const n=xe();return await fetch(`${X}/push/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n})}),console.log("âœ… Unsubscribed from push notifications"),!0}function Ve(){const[t,s]=m.useState(!1);return e.jsx(L.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"mb-6",children:t?e.jsx("div",{className:"w-24 h-24 rounded-2xl shadow-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-3xl",children:"BF"})}):e.jsx("img",{src:"/logo.png",alt:"Behtarin Forex",className:"w-24 h-24 rounded-2xl shadow-lg object-cover",onError:()=>s(!0)})})}const He=({theme:t,icon:s,label:n,description:r,color:l,onClick:i})=>e.jsxs(L.button,{whileTap:{scale:.98},onClick:()=>i(t),className:"w-full p-4 rounded-2xl bg-white/5 border border-white/10 flex items-center gap-4 active:bg-white/10 transition-all",children:[e.jsx("div",{className:`p-3 rounded-xl ${l==="blue"?"bg-blue-500/20":l==="green"?"bg-green-500/20":"bg-yellow-500/20"}`,children:e.jsx(s,{size:24,className:`${l==="blue"?"text-blue-400":l==="green"?"text-green-400":"text-yellow-400"}`})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-white font-semibold text-base",children:n}),e.jsx("div",{className:"text-gray-500 text-xs",children:r})]}),e.jsx(Ce,{size:20,className:"text-gray-600"})]});function qe(){const{setTheme:t}=le(),s=F(),[n,r]=m.useState(!1),[l,i]=m.useState(!1),[p,x]=m.useState(!1);m.useEffect(()=>{(async()=>{const j=Y();if(x(j),j){const d=await Ie();r(d)}})()},[]);const a=c=>{t(c),s("/dashboard")},u=async()=>{i(!0);try{n?(await Oe(),r(!1)):(await Fe(),r(!0))}catch(c){console.error("Notification error:",c),alert(c.message||"Ø®Ø·Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†")}finally{i(!1)}},g=[{id:D.TELEGRAM,label:"Live Trade",description:"Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø²Ù†Ø¯Ù‡ - Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ",icon:q,color:"green"},{id:D.META5,label:"Signal Channel",description:"Ú©Ø§Ù†Ø§Ù„ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ù‡ØªØ±ÛŒÙ† ÙØ§Ø±Ú©Ø³",icon:_,color:"blue"}];return e.jsxs("div",{className:"min-h-[100dvh] bg-[#0e1621] flex flex-col pt-[env(safe-area-inset-top)] overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 py-8",children:[e.jsx(Ve,{}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Behtarin Forex"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ø¨Ù‡ØªØ±ÛŒÙ† ÙØ§Ø±Ú©Ø³"})]}),e.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[g.map((c,j)=>e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+j*.1},children:e.jsx(He,{theme:c.id,icon:c.icon,label:c.label,description:c.description,color:c.color,onClick:a})},c.id)),e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},style:{display:"block"},children:e.jsxs("button",{onClick:p?u:()=>alert("Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†ØŒ Ø§Ù¾ Ø±Ø§ Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ (Add to Home Screen)"),disabled:l,className:`w-full p-4 rounded-2xl border flex items-center gap-3 transition-all ${n?"bg-green-500/10 border-green-500/30":p?"bg-white/5 border-white/10":"bg-orange-500/10 border-orange-500/30"}`,children:[e.jsx("div",{className:`p-3 rounded-xl flex-shrink-0 ${n?"bg-green-500/20":p?"bg-gray-500/20":"bg-orange-500/20"}`,children:l?e.jsx(R,{size:24,className:"text-gray-400 animate-spin"}):n?e.jsx(V,{size:24,className:"text-green-400"}):e.jsx(Se,{size:24,className:p?"text-gray-400":"text-orange-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-white font-semibold text-base",children:n?"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ÙØ¹Ø§Ù„":p?"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ØºÛŒØ±ÙØ¹Ø§Ù„":"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†"}),e.jsx("div",{className:"text-gray-500 text-xs",children:n?"Ø¨Ø±Ø§ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯":p?"Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯":"Add to Home Screen Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-all flex-shrink-0 ${n?"bg-green-500":p?"bg-gray-600":"bg-orange-600"} relative`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full bg-white transition-all duration-200 ${n?"right-0.5":"right-6"}`})})]})})]})]}),e.jsxs("div",{className:"p-6 pb-[max(1.5rem,env(safe-area-inset-bottom))] flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"t.me/behtarinforex"}),e.jsx("button",{onClick:()=>s("/admin"),className:"p-2 rounded-lg hover:bg-white/5 transition",children:e.jsx(ze,{size:18,className:"text-gray-600"})})]})]})}const Ye="modulepreload",Ge=function(t){return"/"+t},te={},Je=function(s,n,r){let l=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),x=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));l=Promise.allSettled(n.map(a=>{if(a=Ge(a),a in te)return;te[a]=!0;const u=a.endsWith(".css"),g=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${g}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":Ye,u||(c.as="script"),c.crossOrigin="",c.href=a,x&&c.setAttribute("nonce",x),document.head.appendChild(c),u)return new Promise((j,d)=>{c.addEventListener("load",j),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(p){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=p,window.dispatchEvent(x),!x.defaultPrevented)throw p}return l.then(p=>{for(const x of p||[])x.status==="rejected"&&i(x.reason);return s().catch(i)})},We="https://behtarin-forex-backend.onrender.com/api".replace("/api","")||"http://localhost:5000";function ue(){const[t,s]=m.useState([]),[n,r]=m.useState(!1),[l,i]=m.useState(null);m.useEffect(()=>{let a=null;return(async()=>{try{const{io:g}=await Je(async()=>{const{io:c}=await import("./index-wSuXe0Ee.js");return{io:c}},[]);a=g(We,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),a.on("connect",()=>{console.log("ðŸ”Œ Connected to trade server"),r(!0),a.emit("subscribe")}),a.on("disconnect",()=>{console.log("ðŸ”Œ Disconnected from trade server"),r(!1)}),a.on("trade_update",c=>{console.log("ðŸ“Š Trade update received:",c);const{event:j,data:d}=c,v={id:Date.now(),event:j,data:d,timestamp:new Date().toISOString()};s([v]),Xe(j)}),a.on("positions",c=>{console.log("ðŸ“Š Positions received:",c.length)}),i(a)}catch(g){console.error("Socket connection error:",g)}})(),()=>{a&&a.disconnect()}},[]);const p=m.useCallback(a=>{s(u=>u.filter(g=>g.id!==a))},[]),x=m.useCallback(()=>{s([])},[]);return{notifications:t,connected:n,dismissNotification:p,clearAll:x}}function Xe(t){try{const s=window.AudioContext||window.webkitAudioContext,n=new s,r=n.createOscillator(),l=n.createGain();r.connect(l),l.connect(n.destination),t==="position_opened"?(r.frequency.value=800,r.type="sine"):t==="position_closed"?(r.frequency.value=600,r.type="triangle"):(r.frequency.value=500,r.type="sine"),l.gain.setValueAtTime(.3,n.currentTime),l.gain.exponentialRampToValueAtTime(.01,n.currentTime+.3),r.start(n.currentTime),r.stop(n.currentTime+.3)}catch{}}const K="https://behtarin-forex-backend.onrender.com/api";async function se(){try{const t=await fetch(`${K}/trades/positions`);if(!t.ok)throw new Error("Failed to fetch positions");return await t.json()}catch(t){return console.error("API Error:",t),[]}}async function Ke(){try{const t=await fetch(`${K}/telegram/channel`);if(!t.ok)throw new Error("Failed to fetch channel info");return await t.json()}catch(t){return console.error("API Error:",t),null}}async function Ze(t=20){try{const s=await fetch(`${K}/telegram/messages?limit=${t}`);if(!s.ok)throw new Error("Failed to fetch messages");return(await s.json()).messages||[]}catch(s){return console.error("API Error:",s),[]}}function me(t){const s=(t==null?void 0:t.toUpperCase())||"";return s.includes("XAU")?.1:s.includes("JPY")?.01:1e-4}function Qe(t,s,n,r=60){const l=me(t);return(n==null?void 0:n.toUpperCase().includes("BUY"))?s-r*l:s+r*l}function et(t,s,n,r=150){const l=me(t);return(n==null?void 0:n.toUpperCase().includes("BUY"))?s+r*l:s-r*l}function tt(t){const s=(t==null?void 0:t.toUpperCase())||"";return s.includes("XAU")?2:s.includes("JPY")?3:5}function B(t,s){const n=tt(t);return(s==null?void 0:s.toFixed(n))||"---"}const st=t=>{try{const s=localStorage.getItem("behtarin_closed_signals"),n=s?JSON.parse(s):[];t.closeTime=Date.now(),n.unshift(t),n.length>100&&n.splice(100),localStorage.setItem("behtarin_closed_signals",JSON.stringify(n)),console.log("ðŸ“ Moved to history:",t.id)}catch(s){console.error("Error moving to history:",s)}};function rt(){const t=F(),{notifications:s}=ue(),[n,r]=m.useState(()=>{try{const d=localStorage.getItem("behtarin_signals");return d?JSON.parse(d):{}}catch{return{}}}),[l,i]=m.useState([]),p=m.useRef(null),x=m.useRef(new Set),a=m.useRef([]),u=m.useRef(new Map);m.useEffect(()=>{try{localStorage.setItem("behtarin_signals",JSON.stringify(n))}catch(d){console.error("Error saving signals:",d)}},[n]);const g=async()=>{const d=await se();!d||d.length===0||r(v=>{const y={...v};let S=!1;return d.forEach(h=>{var f,b;const o=h.magic||h.comment||((f=h.id)==null?void 0:f.toString().slice(-8));if(!y[o]){const P=(b=h.type)==null?void 0:b.includes("BUY");y[o]={id:o,symbol:h.symbol,type:P?"buy":"sell",isBuy:P,openPrice:h.openPrice,volume:h.volume,openTime:h.time||Date.now(),status:"active",actions:[],liveProfit:h.profit||0,livePrice:h.currentPrice,liveVolume:h.volume},S=!0,console.log("ðŸ“Š Synced position:",o,h.symbol)}}),S?y:v})};m.useEffect(()=>{g()},[]),m.useEffect(()=>{const d=()=>{document.visibilityState==="visible"&&(console.log("ðŸ“± App visible - syncing positions..."),g())};return document.addEventListener("visibilitychange",d),()=>document.removeEventListener("visibilitychange",d)},[]),m.useEffect(()=>{const d=async()=>{const y=await se();if(y){const S=new Map;y.forEach(h=>{var f,b;const o=h.magic||h.comment||((f=h.id)==null?void 0:f.toString().slice(-8));S.set(o,{fullId:((b=h.id)==null?void 0:b.toString())||"",volume:h.volume,profit:h.profit,price:h.currentPrice})}),y.forEach(h=>{var P,C;const o=h.magic||h.comment||((P=h.id)==null?void 0:P.toString().slice(-8)),f=((C=h.id)==null?void 0:C.toString())||"",b=u.current.get(o);if(b&&b.volume>h.volume+.001){const T=b.volume-h.volume,U=T.toFixed(2),N=h.volume,$=a.current.findIndex(k=>{const M=k.positionId===f||k.positionId.endsWith(o)||f.endsWith(k.positionId.slice(-8)),z=Math.abs(k.volume-T)<.005,O=Date.now()-k.timestamp<15e3;return M&&z&&O});let A,E;$!==-1?(A=a.current[$].profit,E=a.current[$].price,console.log("âœ… Using WebSocket profit:",A.toFixed(2)),a.current.splice($,1)):(A=(b.volume>0?(b.profit||0)/b.volume:0)*T,E=h.currentPrice,console.log("âš ï¸ Using calculated profit:",A.toFixed(2),"(no matching deal found)")),console.log("Volume:",b.volume.toFixed(2),"â†’",h.volume.toFixed(2),"| Profit:",A.toFixed(2)),r(k=>k[o]?{...k,[o]:{...k[o],actions:[...k[o].actions||[],{type:"partial_close",closedVolume:U,remainingVolume:N.toFixed(2),profit:A,price:E,timestamp:new Date().toISOString()}]}}:k)}r(T=>T[o]?{...T,[o]:{...T[o],livePrice:h.currentPrice,liveProfit:h.profit,liveVolume:h.volume}}:T)}),u.current.size>0&&u.current.forEach((h,o)=>{if(!S.has(o)){console.log("Position fully closed:",o);const f=a.current.findIndex(C=>{const T=C.positionId.endsWith(o)||o.endsWith(C.positionId.slice(-8)),U=Date.now()-C.timestamp<15e3;return T&&U});let b=h.profit||0,P=h.price;f!==-1?(b=a.current[f].profit,P=a.current[f].price,console.log("âœ… Using WebSocket profit for close:",b.toFixed(2)),a.current.splice(f,1)):console.log("âš ï¸ Using last known profit for close:",b.toFixed(2)),r(C=>{var k;if(!C[o]||C[o].status==="closed")return C;const T=C[o].actions||[],U=T.reduce((M,z)=>M+(z.profit||0),0),N=U+b;console.log("Total P/L calculation:",U.toFixed(2),"+",b.toFixed(2),"=",N.toFixed(2));const $={...C[o],status:"closed",closePrice:P,closeProfit:N,totalProfit:N,closeTime:new Date().toISOString(),actions:[...T,{type:"closed",price:P,profit:b,volume:(k=h.volume)==null?void 0:k.toFixed(2),timestamp:new Date().toISOString()}]};st($);const{[o]:A,...E}=C;return E})}}),u.current=S,i(y)}};d();const v=setInterval(d,2e3);return()=>clearInterval(v)},[]),m.useEffect(()=>{var d,v,y,S,h,o,f,b,P,C,T,U;if(s.length>0){const N=s[0],$=`${N.event}-${(d=N.data)==null?void 0:d.id}-${N.timestamp}`;if(x.current.has($))return;x.current.add($);const A=((v=N.data)==null?void 0:v.magic)||((y=N.data)==null?void 0:y.comment)||((h=(S=N.data)==null?void 0:S.id)==null?void 0:h.toString().slice(-8))||"Unknown";if(N.event==="position_opened"){const E=(f=(o=N.data)==null?void 0:o.type)==null?void 0:f.includes("BUY");r(k=>{var M,z,O,Z,Q;return{...k,[A]:{id:A,symbol:(M=N.data)==null?void 0:M.symbol,type:E?"buy":"sell",isBuy:E,openPrice:(z=N.data)==null?void 0:z.openPrice,volume:(O=N.data)==null?void 0:O.volume,openTime:N.timestamp,status:"active",actions:[],liveProfit:0,livePrice:(Z=N.data)==null?void 0:Z.openPrice,liveVolume:(Q=N.data)==null?void 0:Q.volume}}})}else if(N.event==="deal_closed"){const E=((P=(b=N.data)==null?void 0:b.positionId)==null?void 0:P.toString())||"",k=((C=N.data)==null?void 0:C.profit)||0,M=((T=N.data)==null?void 0:T.volume)||0,z=(U=N.data)==null?void 0:U.price;console.log("Deal closed:",{positionId:E,profit:k,volume:M}),a.current.push({positionId:E,profit:k,volume:M,price:z,timestamp:Date.now()}),a.current.length>20&&(a.current=a.current.slice(-20))}else N.event==="position_closed"&&console.log("Ignoring position_closed")}},[s]),m.useEffect(()=>{var d;(d=p.current)==null||d.scrollIntoView({behavior:"smooth"})},[n]);const c=l.map(d=>{var v,y;return{code:d.magic||d.comment||((v=d.id)==null?void 0:v.toString().slice(-8)),symbol:d.symbol,type:(y=d.type)!=null&&y.includes("BUY")?"BUY":"SELL",volume:d.volume,profit:d.profit}}),j=Object.values(n).sort((d,v)=>new Date(d.openTime)-new Date(v.openTime));return e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621] safe-top",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:"ðŸ“Š Signal Tracker"}),e.jsxs("div",{className:"text-[11px] text-gray-400",children:[c.length," Ø³ÛŒÚ¯Ù†Ø§Ù„ ÙØ¹Ø§Ù„"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t("/history"),className:"p-2 hover:bg-white/10 rounded-lg transition",children:e.jsx(J,{size:20,className:"text-gray-400"})}),e.jsx(Le,{size:20,className:"text-gray-400"})]})]}),c.length>0&&e.jsx("div",{className:"bg-[#1c2733] px-3 py-2 flex gap-2 overflow-x-auto border-b border-[#0e1621]",children:c.map((d,v)=>{var y;return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs whitespace-nowrap ${d.type==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[e.jsx("span",{className:"font-mono font-bold",children:d.code}),e.jsx("span",{children:d.symbol}),e.jsxs("span",{className:"text-gray-400",children:[d.volume,"lot"]}),e.jsxs("span",{className:d.profit>=0?"text-green-400":"text-red-400",children:[d.profit>=0?"+":"",(y=d.profit)==null?void 0:y.toFixed(1),"$"]})]},v)})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-[#182533] text-gray-400 text-[11px] px-3 py-1 rounded-full",children:"Ø§Ù…Ø±ÙˆØ²"})}),j.length===0&&e.jsx("div",{className:"flex justify-center mt-10",children:e.jsxs("div",{className:"bg-[#182533] text-gray-400 text-sm px-4 py-3 rounded-xl text-center",children:[e.jsx(V,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("div",{children:"Ù…Ù†ØªØ¸Ø± Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯..."})]})}),e.jsx(ae,{children:j.map(d=>e.jsx(L.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},className:"flex justify-start",children:e.jsx(nt,{signal:d})},d.id))}),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"bg-[#17212b] border-t border-[#0e1621] p-3 pb-[max(0.75rem,env(safe-area-inset-bottom))]",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Ù…ØªØµÙ„ Ø¨Ù‡ MetaTrader"})]}),e.jsx("span",{children:"t.me/behtarinforex"})]})})]})}function nt({signal:t}){const{id:s,symbol:n,type:r,isBuy:l,openPrice:i,volume:p,openTime:x,status:a,actions:u,liveProfit:g,livePrice:c,closeProfit:j}=t,d=o=>o!=null&&o.includes("XAU")?"Gold":o!=null&&o.includes("XAG")?"Silver":o,v=l?"bg-gradient-to-br from-green-900/40 to-green-800/20 border-green-500/30":"bg-gradient-to-br from-red-900/40 to-red-800/20 border-red-500/30",y=a==="closed"?j:g,S=y>=0,h=u&&u.length>0;return e.jsxs("div",{dir:"ltr",className:`w-[280px] rounded-2xl rounded-tl-md border ${v} overflow-hidden`,children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap text-left",children:[e.jsx("span",{className:`text-base ${l?"text-green-500":"text-red-500"}`,children:l?"ðŸŸ¢":"ðŸ”´"}),e.jsx("span",{className:"text-white font-bold",children:d(n)}),e.jsx("span",{className:`font-bold text-sm ${l?"text-green-400":"text-red-400"}`,children:l?"Buy":"Sell"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["(",B(n,i),")"]}),e.jsxs("span",{className:"text-yellow-500 font-mono text-xs",children:["#",s]})]})}),e.jsxs("div",{className:"px-3 py-1.5 flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Volume"}),e.jsxs("span",{className:"font-mono text-white text-sm",children:[p," lot"]})]}),y!=null&&e.jsx("div",{className:"px-3 py-1.5 border-t border-white/5",children:e.jsxs("div",{className:`flex justify-between items-center px-2 py-1.5 rounded-lg ${S?"bg-green-500/20":"bg-red-500/20"}`,children:[e.jsx("span",{className:"text-gray-300 text-xs",children:"P/L"}),e.jsxs("span",{className:`font-mono font-bold ${S?"text-green-400":"text-red-400"}`,children:[S?"+":"",y==null?void 0:y.toFixed(2),"$"]})]})}),h&&e.jsx("div",{className:"border-t border-white/10",children:u.map((o,f)=>e.jsx(it,{action:o,symbol:n,signalCloseProfit:t.closeProfit},f))}),e.jsxs("div",{className:"px-3 py-1 flex justify-between items-center border-t border-white/5",children:[e.jsxs("span",{className:`text-[10px] ${a==="closed"?"text-gray-500":"text-green-400"}`,children:["â— ",a==="closed"?"Closed":"Active"]}),e.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(x).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]})}function it({action:t,symbol:s,signalCloseProfit:n}){const{type:r,closedVolume:l,remainingVolume:i,profit:p,price:x,timestamp:a}=t,u=(p??0)>=0;if(r==="partial_close")return e.jsxs("div",{className:"px-3 py-2 bg-yellow-500/10 border-b border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"ðŸ“¦"}),e.jsx("span",{className:"text-gray-300",children:"Partial Close"})]}),e.jsx("span",{className:"text-gray-500 text-[10px]",children:new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("span",{className:"text-red-400",children:["-",l," lot"]}),e.jsx("span",{className:"text-gray-500",children:"â†’"}),e.jsxs("span",{className:"text-green-400",children:[i," lot"]})]}),e.jsxs("span",{className:`font-mono font-bold text-xs ${u?"text-green-400":"text-red-400"}`,children:[u?"+":"",p==null?void 0:p.toFixed(2),"$"]})]})]});if(r==="closed"){const g=n??p??0,c=g>=0;return e.jsxs("div",{className:"px-3 py-2 bg-gray-500/10 border-b border-gray-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400",children:"âœ…"}),e.jsx("span",{className:"text-gray-300",children:"Fully Closed"}),e.jsxs("span",{className:"text-gray-500",children:["(",B(s,x),")"]})]}),e.jsx("span",{className:"text-gray-500 text-[10px]",children:new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"flex items-center justify-end mt-1",children:e.jsxs("span",{className:`font-mono font-bold text-sm ${c?"text-green-400":"text-red-400"}`,children:["Total P/L: ",c?"+":"",g==null?void 0:g.toFixed(2),"$"]})})]})}return null}function at({post:t,onReplyClick:s,isHighlighted:n}){const r=t.replyTo&&t.replyTo.text;return e.jsxs("div",{id:`msg-${t.id}`,className:`bg-[#182533] rounded-xl overflow-hidden transition-all duration-500 ${r?"border-l-4 border-l-blue-500 border border-blue-500/20":"border border-white/5"} ${n?"ring-2 ring-yellow-500 bg-yellow-500/10":""}`,children:[r&&e.jsxs("div",{className:"px-3 py-2 bg-blue-500/10 border-b border-blue-500/20 cursor-pointer hover:bg-blue-500/20 transition-colors active:bg-blue-500/30 flex items-start gap-2",onClick:()=>s(t.replyTo.id),children:[e.jsx(Me,{size:14,className:"text-blue-400 rotate-180 flex-shrink-0 mt-1"}),e.jsx("div",{className:"flex-1 min-w-0 bg-[#0e1621] rounded px-2 py-1.5 border-l-2 border-blue-400",children:e.jsx("p",{className:"text-xs text-gray-400 line-clamp-4 leading-relaxed",dir:"auto",children:t.replyTo.text})}),e.jsx("span",{className:"text-[10px] text-blue-400 flex-shrink-0 mt-1",children:"â†©ï¸"})]}),e.jsx("div",{className:"p-4",children:e.jsx("pre",{className:"text-gray-200 text-sm whitespace-pre-wrap font-sans leading-relaxed",dir:"auto",children:t.text})}),(t.time||t.views)&&e.jsxs("div",{className:"px-4 py-2 border-t border-white/5 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:t.time}),t.views&&e.jsxs("span",{children:["ðŸ‘ ",t.views]})]})]})}function ot(){const t=F(),[s,n]=m.useState([]),[r,l]=m.useState(null),[i,p]=m.useState(!0),[x,a]=m.useState(!1),[u,g]=m.useState(!1),[c,j]=m.useState(null),d=m.useRef(null),v=m.useRef(null),y=()=>{var f;(f=v.current)==null||f.scrollIntoView({behavior:"smooth"})},S=m.useCallback(f=>{if(!f)return;const b=document.getElementById(`msg-${f}`);b&&(b.scrollIntoView({behavior:"smooth",block:"center"}),j(f),setTimeout(()=>j(null),2e3))},[]),h=()=>{if(d.current){const{scrollTop:f,scrollHeight:b,clientHeight:P}=d.current;g(b-f-P>100)}},o=async(f=!1)=>{f?p(!0):a(!0);try{const[b,P]=await Promise.all([Ze(30),Ke()]);b&&b.length>0&&(n(b),f&&setTimeout(y,150)),P&&l(P)}catch(b){console.error("Error:",b)}finally{p(!1),a(!1)}};return m.useEffect(()=>{o(!0);const f=setInterval(()=>o(!1),5e3);return()=>clearInterval(f)},[]),e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621] safe-top relative",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(_,{size:18,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:(r==null?void 0:r.title)||"Signal Channel"}),e.jsxs("div",{className:"text-[11px] text-gray-400 flex items-center gap-2",children:[e.jsxs("span",{children:["@",(r==null?void 0:r.username)||"behtarinforex"]}),(r==null?void 0:r.memberCount)>0&&e.jsxs("span",{className:"text-blue-400",children:["â€¢ ",r.memberCount.toLocaleString()," Ø¹Ø¶Ùˆ"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(!1),disabled:x,className:"p-2 hover:bg-white/10 rounded-full transition disabled:opacity-50",children:x?e.jsx(R,{size:18,className:"text-gray-400 animate-spin"}):e.jsx($e,{size:18,className:"text-gray-400"})}),e.jsx("a",{href:`https://t.me/${(r==null?void 0:r.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-blue-600",children:"Join"})]})]}),e.jsx("div",{ref:d,onScroll:h,className:"flex-1 overflow-y-auto p-3 space-y-3",children:i?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(R,{size:32,className:"text-blue-400 animate-spin"})}):s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-10",children:"Ù‡ÛŒÚ† Ù¾ÛŒØ§Ù…ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center py-2",children:e.jsx("a",{href:`https://t.me/${(r==null?void 0:r.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 text-xs hover:underline",children:"â† Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…"})}),s.map((f,b)=>e.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.01},children:e.jsx(at,{post:f,onReplyClick:S,isHighlighted:c===f.id})},f.id)),e.jsx("div",{ref:v})]})}),u&&e.jsx("button",{onClick:y,className:"absolute bottom-24 right-4 p-3 bg-[#17212b] border border-white/10 rounded-full shadow-lg hover:bg-[#1c2733] transition z-20",children:e.jsx(we,{size:20,className:"text-gray-400"})}),e.jsx("div",{className:"bg-[#17212b] border-t border-[#0e1621] p-3 pb-[max(0.75rem,env(safe-area-inset-bottom))]",children:e.jsxs("a",{href:`https://t.me/${(r==null?void 0:r.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl py-3 text-white font-medium",children:[e.jsx(_,{size:18}),e.jsx("span",{children:"Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„"})]})})]})}function lt(){const{theme:t}=le();return e.jsx("div",{className:"bg-[#0e1621] min-h-screen w-full flex justify-center items-start",children:e.jsxs("div",{className:"min-h-screen w-full max-w-lg mx-auto overflow-hidden bg-[#0e1621]",children:[t===D.TELEGRAM&&e.jsx(rt,{}),t===D.META5&&e.jsx(ot,{})]})})}const re="https://behtarin-forex-backend.onrender.com/api";function ct(){const t=F(),[s,n]=m.useState("signal"),[r,l]=m.useState(""),[i,p]=m.useState(!1),[x,a]=m.useState(!1),[u,g]=m.useState(null),[c,j]=m.useState({symbol:"XAUUSD",tradeType:"buy",entries:"",stopLoss:"",targets:""}),[d,v]=m.useState(""),y=o=>{o.preventDefault(),r.length>0&&p(!0)},S=async()=>{a(!0),g(null);try{const f=await(await fetch(`${re}/telegram/send-signal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,password:r})})).json();f.success?(g({type:"success",text:"Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…"}),j({symbol:"XAUUSD",tradeType:"buy",entries:"",stopLoss:"",targets:""})):g({type:"error",text:f.error||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„"})}catch{g({type:"error",text:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±"})}finally{a(!1)}},h=async()=>{a(!0),g(null);try{const f=await(await fetch(`${re}/telegram/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:d,password:r})})).json();f.success?(g({type:"success",text:"Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…"}),v("")):g({type:"error",text:f.error||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„"})}catch{g({type:"error",text:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±"})}finally{a(!1)}};return i?e.jsxs("div",{className:"min-h-screen bg-[#0e1621] safe-top",children:[e.jsx("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:"ðŸ” Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª"}),e.jsx("div",{className:"text-[11px] text-gray-400",children:"Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ú©Ø§Ù†Ø§Ù„"})]})]})}),e.jsxs("div",{className:"flex border-b border-white/10",children:[e.jsxs("button",{onClick:()=>n("signal"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition ${s==="signal"?"text-blue-400 border-b-2 border-blue-400":"text-gray-500"}`,children:[e.jsx(De,{size:16})," Ø³ÛŒÚ¯Ù†Ø§Ù„"]}),e.jsxs("button",{onClick:()=>n("message"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition ${s==="message"?"text-blue-400 border-b-2 border-blue-400":"text-gray-500"}`,children:[e.jsx(Ue,{size:16})," Ù¾ÛŒØ§Ù…"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[u&&e.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-xl flex items-center gap-2 ${u.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[u.type==="success"?e.jsx(Pe,{size:18}):e.jsx(de,{size:18}),e.jsx("span",{className:"text-sm",children:u.text})]}),s==="signal"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†Ù…Ø§Ø¯"}),e.jsxs("select",{value:c.symbol,onChange:o=>j({...c,symbol:o.target.value}),className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD (Ø·Ù„Ø§)"}),e.jsx("option",{value:"EURUSD",children:"EURUSD (ÛŒÙˆØ±Ùˆ/Ø¯Ù„Ø§Ø±)"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD (Ù¾ÙˆÙ†Ø¯/Ø¯Ù„Ø§Ø±)"}),e.jsx("option",{value:"XAGUSD",children:"XAGUSD (Ù†Ù‚Ø±Ù‡)"}),e.jsx("option",{value:"USDJPY",children:"USDJPY (Ø¯Ù„Ø§Ø±/ÛŒÙ†)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†ÙˆØ¹ Ù…Ø¹Ø§Ù…Ù„Ù‡"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>j({...c,tradeType:"buy"}),className:`flex-1 py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition ${c.tradeType==="buy"?"bg-green-500 text-white":"bg-[#17212b] text-gray-400 border border-white/10"}`,children:[e.jsx(q,{size:18})," Ø®Ø±ÛŒØ¯ (BUY)"]}),e.jsxs("button",{onClick:()=>j({...c,tradeType:"sell"}),className:`flex-1 py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition ${c.tradeType==="sell"?"bg-red-500 text-white":"bg-[#17212b] text-gray-400 border border-white/10"}`,children:[e.jsx(W,{size:18})," ÙØ±ÙˆØ´ (SELL)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†Ù‚Ø§Ø· ÙˆØ±ÙˆØ¯"}),e.jsx("input",{type:"text",value:c.entries,onChange:o=>j({...c,entries:o.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2650 Ùˆ 2648",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ø§Ø³ØªØ§Ù¾ Ù„Ø§Ø³"}),e.jsx("input",{type:"text",value:c.stopLoss,onChange:o=>j({...c,stopLoss:o.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2645",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"ØªØ§Ø±Ú¯Øªâ€ŒÙ‡Ø§ (Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯)"}),e.jsx("input",{type:"text",value:c.targets,onChange:o=>j({...c,targets:o.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2655, 2660, 2665, 2670",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsx("button",{onClick:S,disabled:x||!c.entries||!c.stopLoss||!c.targets,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 text-white font-medium py-4 rounded-xl transition flex items-center justify-center gap-2",children:x?e.jsx(R,{size:20,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(_,{size:18})," Ø§Ø±Ø³Ø§Ù„ Ø³ÛŒÚ¯Ù†Ø§Ù„"]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù…ØªÙ† Ù¾ÛŒØ§Ù…"}),e.jsx("textarea",{value:d,onChange:o=>v(o.target.value),placeholder:"Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...",rows:6,className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 resize-none",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["âœ… ØªØ§Ø±Ú¯Øª Û± Ø²Ø¯Ù‡ Ø´Ø¯!","âœ… ØªØ§Ø±Ú¯Øª Û² Ø²Ø¯Ù‡ Ø´Ø¯!","âŒ Ø§Ø³ØªØ§Ù¾ Ø²Ø¯Ù‡ Ø´Ø¯","ðŸ“Š Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø§Ø²Ø§Ø±...","ðŸ”’ Ø§Ø³ØªØ§Ù¾ Ø¨Ù‡ ÙˆØ±ÙˆØ¯ Ù…Ù†ØªÙ‚Ù„ Ø´Ø¯"].map(o=>e.jsx("button",{onClick:()=>v(d+(d?`
`:"")+o),className:"px-3 py-1.5 bg-[#17212b] border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/5",children:o},o))})]}),e.jsx("button",{onClick:h,disabled:x||!d.trim(),className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 text-white font-medium py-4 rounded-xl transition flex items-center justify-center gap-2",children:x?e.jsx(R,{size:20,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(_,{size:18})," Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…"]})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-[#0e1621] flex flex-col items-center justify-center p-6",children:e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Ae,{size:32,className:"text-blue-400"})}),e.jsx("h1",{className:"text-white text-xl font-bold",children:"Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("input",{type:"password",value:r,onChange:o=>l(o.target.value),placeholder:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 rounded-xl transition",children:"ÙˆØ±ÙˆØ¯"})]}),e.jsx("button",{onClick:()=>t("/login"),className:"w-full mt-4 text-gray-500 text-sm hover:text-gray-400",children:"Ø¨Ø§Ø²Ú¯Ø´Øª"})]})})}function dt(){const t=F(),[s,n]=m.useState(()=>{try{const x=localStorage.getItem("behtarin_closed_signals");return x?JSON.parse(x):[]}catch{return[]}}),r=s.reduce((x,a)=>x+(a.totalProfit||0),0),l=s.reduce((x,a)=>{const u=new Date(a.closeTime||a.openTime).toLocaleDateString("fa-IR");return x[u]||(x[u]=[]),x[u].push(a),x},{}),i=()=>{confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ ØªÙ…Ø§Ù… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯.")&&(localStorage.removeItem("behtarin_closed_signals"),n([]))},p=x=>x!=null&&x.includes("XAU")?"Gold":x!=null&&x.includes("XAG")?"Silver":x!=null&&x.includes("EUR")?"EUR/USD":x!=null&&x.includes("GBP")?"GBP/USD":(x==null?void 0:x.replace(".ec",""))||"Unknown";return e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621]",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-[15px] flex items-center gap-2",children:[e.jsx(J,{size:18}),"ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø¹Ø§Ù…Ù„Ø§Øª"]}),e.jsxs("div",{className:"text-[11px] text-gray-400",children:[s.length," Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡"]})]})]}),s.length>0&&e.jsx("button",{onClick:i,className:"p-2 hover:bg-red-500/20 rounded-lg transition",children:e.jsx(Be,{size:18,className:"text-red-400"})})]}),s.length>0&&e.jsx("div",{className:`px-4 py-3 ${r>=0?"bg-green-500/10":"bg-red-500/10"} border-b border-[#0e1621]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Ù…Ø¬Ù…ÙˆØ¹ Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†:"}),e.jsxs("span",{className:`font-bold text-lg ${r>=0?"text-green-400":"text-red-400"}`,children:[r>=0?"+":"",r.toFixed(2),"$"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(J,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{children:"Ù‡Ù†ÙˆØ² Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒØ§ÛŒ Ø¨Ø³ØªÙ‡ Ù†Ø´Ø¯Ù‡"})]}):Object.entries(l).sort(([x],[a])=>new Date(a)-new Date(x)).map(([x,a])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:x})]}),e.jsx("div",{className:"space-y-2",children:a.map((u,g)=>e.jsxs(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-[#182533] rounded-xl p-3 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${u.isBuy?"bg-green-500/20":"bg-red-500/20"}`,children:u.isBuy?e.jsx(q,{size:14,className:"text-green-400"}):e.jsx(W,{size:14,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium text-sm",children:p(u.symbol)}),e.jsx("span",{className:`ml-2 text-xs ${u.isBuy?"text-green-400":"text-red-400"}`,children:u.isBuy?"BUY":"SELL"})]})]}),e.jsxs("span",{className:"text-gray-500 text-xs font-mono",children:["#",u.id]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Entry"}),e.jsx("span",{className:"text-white",children:B(u.openPrice,u.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Close"}),e.jsx("span",{className:"text-white",children:B(u.closePrice,u.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Volume"}),e.jsxs("span",{className:"text-white",children:[u.volume," lot"]})]})]}),e.jsx("div",{className:`text-center py-2 rounded-lg ${(u.totalProfit||0)>=0?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsxs("span",{className:`font-bold ${(u.totalProfit||0)>=0?"text-green-400":"text-red-400"}`,children:[(u.totalProfit||0)>=0?"+":"",(u.totalProfit||0).toFixed(2),"$"]})}),u.actions&&u.actions.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-white/5",children:[e.jsx("div",{className:"text-[10px] text-gray-500 mb-1",children:"Ø¹Ù…Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§:"}),e.jsx("div",{className:"space-y-1",children:u.actions.map((c,j)=>{var d;return e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsxs("span",{className:"text-gray-400",children:[c.type==="partial"?"Partial Close":"Full Close"," (",c.volume," lot)"]}),e.jsxs("span",{className:c.profit>=0?"text-green-400":"text-red-400",children:[c.profit>=0?"+":"",(d=c.profit)==null?void 0:d.toFixed(2),"$"]})]},j)})})]})]},u.id+"-"+g))})]},x))})]})}const ne=60,ie=150;function xt({notifications:t,onDismiss:s}){return e.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-2 max-w-sm w-full pointer-events-none",children:e.jsx(ae,{children:t.map(n=>e.jsx(L.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:"pointer-events-auto",children:e.jsx(ut,{notification:n,onDismiss:s})},n.id))})})}function ut({notification:t,onDismiss:s}){var y,S;const{id:n,type:r,event:l,data:i,timestamp:p}=t,a=(()=>{var h,o;switch(l){case"position_opened":return{icon:(h=i.type)!=null&&h.includes("BUY")?q:W,color:(o=i.type)!=null&&o.includes("BUY")?"green":"red",title:"ðŸš€ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø² Ø´Ø¯!",titleEn:"New Position Opened!"};case"position_closed":return{icon:Ee,color:i.profit>=0?"green":"red",title:i.profit>=0?"âœ… Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø§ Ø³ÙˆØ¯ Ø¨Ø³ØªÙ‡ Ø´Ø¯!":"âŒ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø§ Ø¶Ø±Ø± Ø¨Ø³ØªÙ‡ Ø´Ø¯!",titleEn:i.profit>=0?"Position Closed (Profit)":"Position Closed (Loss)"};case"position_updated":return{icon:Te,color:"yellow",title:"ðŸ“ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯",titleEn:"Position Updated"};case"order_placed":return{icon:V,color:"blue",title:"ðŸ“‹ Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯",titleEn:"Order Placed"};default:return{icon:V,color:"gray",title:"Trade Update",titleEn:"Trade Update"}}})(),u=a.icon,g=(y=i.type)==null?void 0:y.includes("BUY"),c=parseFloat(i.openPrice)||0,j=i.stopLoss||Qe(i.symbol,c,i.type,ne),d=i.takeProfit||et(i.symbol,c,i.type,ie),v={green:"bg-green-500/10 border-green-500/30 text-green-500",red:"bg-red-500/10 border-red-500/30 text-red-500",yellow:"bg-yellow-500/10 border-yellow-500/30 text-yellow-500",blue:"bg-blue-500/10 border-blue-500/30 text-blue-500",gray:"bg-gray-500/10 border-gray-500/30 text-gray-500"};return e.jsxs("div",{className:`bg-[#1a1a1a] border ${v[a.color].split(" ")[1]} rounded-xl shadow-2xl overflow-hidden backdrop-blur-lg`,children:[e.jsxs("div",{className:`px-4 py-2 flex items-center justify-between ${v[a.color].split(" ")[0]}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{size:18,className:v[a.color].split(" ")[2]}),e.jsx("span",{className:"font-bold text-sm text-white",children:a.title})]}),e.jsx("button",{onClick:()=>s(n),className:"p-1 hover:bg-white/10 rounded transition",children:e.jsx(de,{size:14,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-xl text-white",children:i.symbol}),e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${g?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:g?"BUY":"SELL"})]}),i.volume&&e.jsxs("span",{className:"text-sm text-gray-400 font-mono",children:[i.volume," lot"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-black/40 rounded-lg p-2 border border-white/10",children:[e.jsx("div",{className:"text-gray-400 text-[10px] uppercase mb-1",children:"Entry"}),e.jsx("div",{className:"font-mono text-white font-bold",children:B(i.symbol,c)})]}),e.jsxs("div",{className:"bg-red-500/10 rounded-lg p-2 border border-red-500/20",children:[e.jsxs("div",{className:"text-red-400 text-[10px] uppercase mb-1 flex items-center justify-between",children:[e.jsx("span",{children:"SL"}),e.jsxs("span",{className:"text-[8px] text-red-300",children:[ne," pip"]})]}),e.jsx("div",{className:"font-mono text-red-400 font-bold",children:B(i.symbol,j)})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-lg p-2 border border-green-500/20",children:[e.jsxs("div",{className:"text-green-400 text-[10px] uppercase mb-1 flex items-center justify-between",children:[e.jsx("span",{children:"TP"}),e.jsxs("span",{className:"text-[8px] text-green-300",children:[ie," pip"]})]}),e.jsx("div",{className:"font-mono text-green-400 font-bold",children:B(i.symbol,d)})]})]}),i.profit!==void 0&&e.jsxs("div",{className:`text-center py-2 rounded-lg ${i.profit>=0?"bg-green-500/20":"bg-red-500/20"}`,children:[i.currentPrice&&e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Current: ",e.jsx("span",{className:"text-yellow-500 font-mono",children:B(i.symbol,i.currentPrice)})]}),e.jsxs("span",{className:`font-mono font-bold text-lg ${i.profit>=0?"text-green-500":"text-red-500"}`,children:[i.profit>=0?"+":"",(S=i.profit)==null?void 0:S.toFixed(2),"$"]})]}),e.jsx("div",{className:"text-[10px] text-gray-500 text-right",children:new Date(p).toLocaleTimeString("fa-IR")})]})]})}function mt(){const{notifications:t,connected:s,dismissNotification:n}=ue();return e.jsxs("div",{className:"antialiased",children:[e.jsx(xt,{notifications:t,onDismiss:n}),s&&e.jsxs("div",{className:"fixed bottom-4 left-4 z-50 flex items-center gap-2 bg-green-500/20 text-green-500 text-xs px-3 py-1.5 rounded-full border border-green-500/30",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live Connected"]}),e.jsxs(pe,{children:[e.jsx(I,{path:"/login",element:e.jsx(qe,{})}),e.jsx(I,{path:"/dashboard",element:e.jsx(lt,{})}),e.jsx(I,{path:"/admin",element:e.jsx(ct,{})}),e.jsx(I,{path:"/history",element:e.jsx(dt,{})}),e.jsx(I,{path:"*",element:e.jsx(fe,{to:"/login",replace:!0})})]})]})}function ht(){return e.jsx(ye,{children:e.jsx(mt,{})})}G.createRoot(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(be,{children:e.jsx(ht,{})})}));
