import{j as e,m as L,A as oe}from"./motion-CuGjFofd.js";import{a as pe,r as h,u as O,R as fe,b as I,N as ge,c as be,B as ye}from"./vendor-Ctltn_FS.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(c){if(c.ep)return;c.ep=!0;const a=n(c);fetch(c.href,a)}})();var G={},ee=pe;G.createRoot=ee.createRoot,G.hydrateRoot=ee.hydrateRoot;const B={TELEGRAM:"telegram",WHATSAPP:"whatsapp",META5:"meta5"},le=h.createContext(),je=({children:t})=>{const[s,n]=h.useState(B.TELEGRAM);return h.useEffect(()=>{Object.values(B).forEach(r=>document.body.classList.remove(`theme-${r}`)),document.body.classList.add(`theme-${s}`)},[s]),e.jsx(le.Provider,{value:{theme:s,setTheme:n},children:t})},ce=()=>h.useContext(le);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),de=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ne={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=h.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:c="",children:a,iconNode:p,...x},o)=>h.createElement("svg",{ref:o,...Ne,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:de("lucide",c),...x},[...p.map(([u,g])=>h.createElement(u,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=(t,s)=>{const n=h.forwardRef(({className:r,...c},a)=>h.createElement(we,{ref:a,iconNode:s,className:de(`lucide-${ve(t)}`,r),...c}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=S("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=S("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=S("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=S("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=S("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=S("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=S("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=S("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=S("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=S("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=S("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=S("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=S("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=S("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=S("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=S("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=S("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=S("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=S("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=S("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=S("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=S("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=S("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),X="https://behtarin-forex-backend.onrender.com/api";function ue(){let t=localStorage.getItem("push_user_id");return t||(t="user_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),localStorage.setItem("push_user_id",t)),t}function Y(){return"serviceWorker"in navigator&&"PushManager"in window}async function Re(){return Y()?!!await(await navigator.serviceWorker.ready).pushManager.getSubscription():!1}async function _e(){return(await(await fetch(`${X}/push/vapid-public-key`)).json()).publicKey}function Oe(t){const s="=".repeat((4-t.length%4)%4),n=(t+s).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),c=new Uint8Array(r.length);for(let a=0;a<r.length;++a)c[a]=r.charCodeAt(a);return c}async function Fe(){if(!Y())throw new Error("Push notifications are not supported");if(await Notification.requestPermission()!=="granted")throw new Error("Notification permission denied");const s=await navigator.serviceWorker.register("/sw.js");await navigator.serviceWorker.ready;const n=await _e(),r=Oe(n),c=await s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r}),a=ue();if(!(await fetch(`${X}/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:c,userId:a})})).ok)throw new Error("Failed to subscribe on server");return console.log("âœ… Subscribed to push notifications"),!0}async function Ve(){if(!Y())return;const s=await(await navigator.serviceWorker.ready).pushManager.getSubscription();s&&await s.unsubscribe();const n=ue();return await fetch(`${X}/push/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n})}),console.log("âœ… Unsubscribed from push notifications"),!0}function He(){const[t,s]=h.useState(!1);return e.jsx(L.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"mb-6",children:t?e.jsx("div",{className:"w-24 h-24 rounded-2xl shadow-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-3xl",children:"BF"})}):e.jsx("img",{src:"/logo.png",alt:"Behtarin Forex",className:"w-24 h-24 rounded-2xl shadow-lg object-cover",onError:()=>s(!0)})})}const qe=({theme:t,icon:s,label:n,description:r,color:c,onClick:a})=>e.jsxs(L.button,{whileTap:{scale:.98},onClick:()=>a(t),className:"w-full p-4 rounded-2xl bg-white/5 border border-white/10 flex items-center gap-4 active:bg-white/10 transition-all",children:[e.jsx("div",{className:`p-3 rounded-xl ${c==="blue"?"bg-blue-500/20":c==="green"?"bg-green-500/20":"bg-yellow-500/20"}`,children:e.jsx(s,{size:24,className:`${c==="blue"?"text-blue-400":c==="green"?"text-green-400":"text-yellow-400"}`})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-white font-semibold text-base",children:n}),e.jsx("div",{className:"text-gray-500 text-xs",children:r})]}),e.jsx(Te,{size:20,className:"text-gray-600"})]});function Ye(){const{setTheme:t}=ce(),s=O(),[n,r]=h.useState(!1),[c,a]=h.useState(!1),[p,x]=h.useState(!1);h.useEffect(()=>{(async()=>{const j=Y();if(x(j),j){const l=await Re();r(l)}})()},[]);const o=d=>{t(d),s("/dashboard")},u=async()=>{a(!0);try{n?(await Ve(),r(!1)):(await Fe(),r(!0))}catch(d){console.error("Notification error:",d),alert(d.message||"Ø®Ø·Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†")}finally{a(!1)}},g=[{id:B.TELEGRAM,label:"Live Trade",description:"Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø²Ù†Ø¯Ù‡ - Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ",icon:q,color:"green"},{id:B.META5,label:"Signal Channel",description:"Ú©Ø§Ù†Ø§Ù„ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ù‡ØªØ±ÛŒÙ† ÙØ§Ø±Ú©Ø³",icon:_,color:"blue"}];return e.jsxs("div",{className:"min-h-[100dvh] bg-[#0e1621] flex flex-col pt-[env(safe-area-inset-top)] overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 py-8",children:[e.jsx(He,{}),e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Behtarin Forex"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ø¨Ù‡ØªØ±ÛŒÙ† ÙØ§Ø±Ú©Ø³"})]}),e.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[g.map((d,j)=>e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+j*.1},children:e.jsx(qe,{theme:d.id,icon:d.icon,label:d.label,description:d.description,color:d.color,onClick:o})},d.id)),e.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},style:{display:"block"},children:e.jsxs("button",{onClick:p?u:()=>alert("Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†ØŒ Ø§Ù¾ Ø±Ø§ Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ (Add to Home Screen)"),disabled:c,className:`w-full p-4 rounded-2xl border flex items-center gap-3 transition-all ${n?"bg-green-500/10 border-green-500/30":p?"bg-white/5 border-white/10":"bg-orange-500/10 border-orange-500/30"}`,children:[e.jsx("div",{className:`p-3 rounded-xl flex-shrink-0 ${n?"bg-green-500/20":p?"bg-gray-500/20":"bg-orange-500/20"}`,children:c?e.jsx(R,{size:24,className:"text-gray-400 animate-spin"}):n?e.jsx(V,{size:24,className:"text-green-400"}):e.jsx(ke,{size:24,className:p?"text-gray-400":"text-orange-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-white font-semibold text-base",children:n?"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ÙØ¹Ø§Ù„":p?"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ØºÛŒØ±ÙØ¹Ø§Ù„":"Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†"}),e.jsx("div",{className:"text-gray-500 text-xs",children:n?"Ø¨Ø±Ø§ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯":p?"Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯":"Add to Home Screen Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-all flex-shrink-0 ${n?"bg-green-500":p?"bg-gray-600":"bg-orange-600"} relative`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full bg-white transition-all duration-200 ${n?"right-0.5":"right-6"}`})})]})})]})]}),e.jsxs("div",{className:"p-6 pb-[max(1.5rem,env(safe-area-inset-bottom))] flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"t.me/behtarinforex"}),e.jsx("button",{onClick:()=>s("/admin"),className:"p-2 rounded-lg hover:bg-white/5 transition",children:e.jsx(De,{size:18,className:"text-gray-600"})})]})]})}const Ge="modulepreload",Je=function(t){return"/"+t},te={},We=function(s,n,r){let c=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),x=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=Promise.allSettled(n.map(o=>{if(o=Je(o),o in te)return;te[o]=!0;const u=o.endsWith(".css"),g=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${g}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Ge,u||(d.as="script"),d.crossOrigin="",d.href=o,x&&d.setAttribute("nonce",x),document.head.appendChild(d),u)return new Promise((j,l)=>{d.addEventListener("load",j),d.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${o}`)))})}))}function a(p){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=p,window.dispatchEvent(x),!x.defaultPrevented)throw p}return c.then(p=>{for(const x of p||[])x.status==="rejected"&&a(x.reason);return s().catch(a)})},Xe="https://behtarin-forex-backend.onrender.com/api".replace("/api","")||"http://localhost:5000";function me(){const[t,s]=h.useState([]),[n,r]=h.useState(!1),[c,a]=h.useState(null);h.useEffect(()=>{let o=null;return(async()=>{try{const{io:g}=await We(async()=>{const{io:d}=await import("./index-wSuXe0Ee.js");return{io:d}},[]);o=g(Xe,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),o.on("connect",()=>{console.log("ðŸ”Œ Connected to trade server"),r(!0),o.emit("subscribe")}),o.on("disconnect",()=>{console.log("ðŸ”Œ Disconnected from trade server"),r(!1)}),o.on("trade_update",d=>{console.log("ðŸ“Š Trade update received:",d);const{event:j,data:l}=d,v={id:Date.now(),event:j,data:l,timestamp:new Date().toISOString()};s([v]),Ke(j)}),o.on("positions",d=>{console.log("ðŸ“Š Positions received:",d.length)}),a(o)}catch(g){console.error("Socket connection error:",g)}})(),()=>{o&&o.disconnect()}},[]);const p=h.useCallback(o=>{s(u=>u.filter(g=>g.id!==o))},[]),x=h.useCallback(()=>{s([])},[]);return{notifications:t,connected:n,dismissNotification:p,clearAll:x}}function Ke(t){try{const s=window.AudioContext||window.webkitAudioContext,n=new s,r=n.createOscillator(),c=n.createGain();r.connect(c),c.connect(n.destination),t==="position_opened"?(r.frequency.value=800,r.type="sine"):t==="position_closed"?(r.frequency.value=600,r.type="triangle"):(r.frequency.value=500,r.type="sine"),c.gain.setValueAtTime(.3,n.currentTime),c.gain.exponentialRampToValueAtTime(.01,n.currentTime+.3),r.start(n.currentTime),r.stop(n.currentTime+.3)}catch{}}const K="https://behtarin-forex-backend.onrender.com/api";async function se(){try{const t=await fetch(`${K}/trades/positions`);if(!t.ok)throw new Error("Failed to fetch positions");return await t.json()}catch(t){return console.error("API Error:",t),[]}}async function Ze(){try{const t=await fetch(`${K}/telegram/channel`);if(!t.ok)throw new Error("Failed to fetch channel info");return await t.json()}catch(t){return console.error("API Error:",t),null}}async function Qe(t=20){try{const s=await fetch(`${K}/telegram/messages?limit=${t}`);if(!s.ok)throw new Error("Failed to fetch messages");return(await s.json()).messages||[]}catch(s){return console.error("API Error:",s),[]}}function he(t){const s=(t==null?void 0:t.toUpperCase())||"";return s.includes("XAU")?.1:s.includes("JPY")?.01:1e-4}function et(t,s,n,r=60){const c=he(t);return(n==null?void 0:n.toUpperCase().includes("BUY"))?s-r*c:s+r*c}function tt(t,s,n,r=150){const c=he(t);return(n==null?void 0:n.toUpperCase().includes("BUY"))?s+r*c:s-r*c}function st(t){const s=(t==null?void 0:t.toUpperCase())||"";return s.includes("XAU")?2:s.includes("JPY")?3:5}function D(t,s){const n=st(t);return(s==null?void 0:s.toFixed(n))||"---"}const re=t=>{try{const s=localStorage.getItem("behtarin_closed_signals"),n=s?JSON.parse(s):[];t.closeTime=Date.now(),n.unshift(t),n.length>100&&n.splice(100),localStorage.setItem("behtarin_closed_signals",JSON.stringify(n)),console.log("ðŸ“ Moved to history:",t.id)}catch(s){console.error("Error moving to history:",s)}};function rt(){const t=O(),{notifications:s}=me(),[n,r]=h.useState(()=>{try{const l=localStorage.getItem("behtarin_signals");return l?JSON.parse(l):{}}catch{return{}}}),[c,a]=h.useState([]),p=h.useRef(null),x=h.useRef(new Set),o=h.useRef([]),u=h.useRef(new Map);h.useEffect(()=>{try{localStorage.setItem("behtarin_signals",JSON.stringify(n))}catch(l){console.error("Error saving signals:",l)}},[n]);const g=async()=>{const l=await se(),v=new Set;l&&l.length>0&&l.forEach(y=>{var f;const N=y.magic||y.comment||((f=y.id)==null?void 0:f.toString().slice(-8));v.add(N)}),r(y=>{const N={...y};let f=!1;return l&&l.length>0&&l.forEach(i=>{var b,C;const m=i.magic||i.comment||((b=i.id)==null?void 0:b.toString().slice(-8));if(!N[m]){const P=(C=i.type)==null?void 0:C.includes("BUY");N[m]={id:m,symbol:i.symbol,type:P?"buy":"sell",isBuy:P,openPrice:i.openPrice,volume:i.volume,openTime:i.time||Date.now(),status:"active",actions:[],liveProfit:i.profit||0,livePrice:i.currentPrice,liveVolume:i.volume},f=!0,console.log("ðŸ“Š Synced new position:",m,i.symbol)}}),Object.keys(N).forEach(i=>{if(!v.has(i)){const m=N[i];m.status!=="closed"&&(m.status="closed",m.closeTime=m.closeTime||Date.now(),m.totalProfit=m.closeProfit||m.liveProfit||0),re(m),delete N[i],f=!0,console.log("ðŸ“ Moved closed signal to history:",i)}}),f?N:y})};h.useEffect(()=>{g()},[]),h.useEffect(()=>{const l=()=>{document.visibilityState==="visible"&&(console.log("ðŸ“± App visible - syncing positions..."),g())};return document.addEventListener("visibilitychange",l),()=>document.removeEventListener("visibilitychange",l)},[]),h.useEffect(()=>{const l=async()=>{const y=await se();if(y){const N=new Map;y.forEach(f=>{var m,b;const i=f.magic||f.comment||((m=f.id)==null?void 0:m.toString().slice(-8));N.set(i,{fullId:((b=f.id)==null?void 0:b.toString())||"",volume:f.volume,profit:f.profit,price:f.currentPrice})}),y.forEach(f=>{var C,P;const i=f.magic||f.comment||((C=f.id)==null?void 0:C.toString().slice(-8)),m=((P=f.id)==null?void 0:P.toString())||"",b=u.current.get(i);if(b&&b.volume>f.volume+.001){const T=b.volume-f.volume,U=T.toFixed(2),w=f.volume,$=o.current.findIndex(k=>{const M=k.positionId===m||k.positionId.endsWith(i)||m.endsWith(k.positionId.slice(-8)),z=Math.abs(k.volume-T)<.005,F=Date.now()-k.timestamp<15e3;return M&&z&&F});let A,E;$!==-1?(A=o.current[$].profit,E=o.current[$].price,console.log("âœ… Using WebSocket profit:",A.toFixed(2)),o.current.splice($,1)):(A=(b.volume>0?(b.profit||0)/b.volume:0)*T,E=f.currentPrice,console.log("âš ï¸ Using calculated profit:",A.toFixed(2),"(no matching deal found)")),console.log("Volume:",b.volume.toFixed(2),"â†’",f.volume.toFixed(2),"| Profit:",A.toFixed(2)),r(k=>k[i]?{...k,[i]:{...k[i],actions:[...k[i].actions||[],{type:"partial_close",closedVolume:U,remainingVolume:w.toFixed(2),profit:A,price:E,timestamp:new Date().toISOString()}]}}:k)}r(T=>T[i]?{...T,[i]:{...T[i],livePrice:f.currentPrice,liveProfit:f.profit,liveVolume:f.volume}}:T)}),u.current.size>0&&u.current.forEach((f,i)=>{if(!N.has(i)){console.log("Position fully closed:",i);const m=o.current.findIndex(P=>{const T=P.positionId.endsWith(i)||i.endsWith(P.positionId.slice(-8)),U=Date.now()-P.timestamp<15e3;return T&&U});let b=f.profit||0,C=f.price;m!==-1?(b=o.current[m].profit,C=o.current[m].price,console.log("âœ… Using WebSocket profit for close:",b.toFixed(2)),o.current.splice(m,1)):console.log("âš ï¸ Using last known profit for close:",b.toFixed(2)),r(P=>{var k;if(!P[i]||P[i].status==="closed")return P;const T=P[i].actions||[],U=T.reduce((M,z)=>M+(z.profit||0),0),w=U+b;console.log("Total P/L calculation:",U.toFixed(2),"+",b.toFixed(2),"=",w.toFixed(2));const $={...P[i],status:"closed",closePrice:C,closeProfit:w,totalProfit:w,closeTime:new Date().toISOString(),actions:[...T,{type:"closed",price:C,profit:b,volume:(k=f.volume)==null?void 0:k.toFixed(2),timestamp:new Date().toISOString()}]};re($);const{[i]:A,...E}=P;return E})}}),u.current=N,a(y)}};l();const v=setInterval(l,2e3);return()=>clearInterval(v)},[]),h.useEffect(()=>{var l,v,y,N,f,i,m,b,C,P,T,U;if(s.length>0){const w=s[0],$=`${w.event}-${(l=w.data)==null?void 0:l.id}-${w.timestamp}`;if(x.current.has($))return;x.current.add($);const A=((v=w.data)==null?void 0:v.magic)||((y=w.data)==null?void 0:y.comment)||((f=(N=w.data)==null?void 0:N.id)==null?void 0:f.toString().slice(-8))||"Unknown";if(w.event==="position_opened"){const E=(m=(i=w.data)==null?void 0:i.type)==null?void 0:m.includes("BUY");r(k=>{var M,z,F,Z,Q;return{...k,[A]:{id:A,symbol:(M=w.data)==null?void 0:M.symbol,type:E?"buy":"sell",isBuy:E,openPrice:(z=w.data)==null?void 0:z.openPrice,volume:(F=w.data)==null?void 0:F.volume,openTime:w.timestamp,status:"active",actions:[],liveProfit:0,livePrice:(Z=w.data)==null?void 0:Z.openPrice,liveVolume:(Q=w.data)==null?void 0:Q.volume}}})}else if(w.event==="deal_closed"){const E=((C=(b=w.data)==null?void 0:b.positionId)==null?void 0:C.toString())||"",k=((P=w.data)==null?void 0:P.profit)||0,M=((T=w.data)==null?void 0:T.volume)||0,z=(U=w.data)==null?void 0:U.price;console.log("Deal closed:",{positionId:E,profit:k,volume:M}),o.current.push({positionId:E,profit:k,volume:M,price:z,timestamp:Date.now()}),o.current.length>20&&(o.current=o.current.slice(-20))}else w.event==="position_closed"&&console.log("Ignoring position_closed")}},[s]),h.useEffect(()=>{var l;(l=p.current)==null||l.scrollIntoView({behavior:"smooth"})},[n]);const d=c.map(l=>{var v,y;return{code:l.magic||l.comment||((v=l.id)==null?void 0:v.toString().slice(-8)),symbol:l.symbol,type:(y=l.type)!=null&&y.includes("BUY")?"BUY":"SELL",volume:l.volume,profit:l.profit}}),j=Object.values(n).sort((l,v)=>new Date(l.openTime)-new Date(v.openTime));return e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621] safe-top",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:"ðŸ“Š Signal Tracker"}),e.jsxs("div",{className:"text-[11px] text-gray-400",children:[d.length," Ø³ÛŒÚ¯Ù†Ø§Ù„ ÙØ¹Ø§Ù„"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t("/history"),className:"p-2 hover:bg-white/10 rounded-lg transition",children:e.jsx(J,{size:20,className:"text-gray-400"})}),e.jsx(Ae,{size:20,className:"text-gray-400"})]})]}),d.length>0&&e.jsx("div",{className:"bg-[#1c2733] px-3 py-2 flex gap-2 overflow-x-auto border-b border-[#0e1621]",children:d.map((l,v)=>{var y;return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs whitespace-nowrap ${l.type==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[e.jsx("span",{className:"font-mono font-bold",children:l.code}),e.jsx("span",{children:l.symbol}),e.jsxs("span",{className:"text-gray-400",children:[l.volume,"lot"]}),e.jsxs("span",{className:l.profit>=0?"text-green-400":"text-red-400",children:[l.profit>=0?"+":"",(y=l.profit)==null?void 0:y.toFixed(1),"$"]})]},v)})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-[#182533] text-gray-400 text-[11px] px-3 py-1 rounded-full",children:"Ø§Ù…Ø±ÙˆØ²"})}),j.length===0&&e.jsx("div",{className:"flex justify-center mt-10",children:e.jsxs("div",{className:"bg-[#182533] text-gray-400 text-sm px-4 py-3 rounded-xl text-center",children:[e.jsx(V,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("div",{children:"Ù…Ù†ØªØ¸Ø± Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯..."})]})}),e.jsx(oe,{children:j.map(l=>e.jsx(L.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},className:"flex justify-start",children:e.jsx(nt,{signal:l})},l.id))}),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"bg-[#17212b] border-t border-[#0e1621] p-3 pb-[max(0.75rem,env(safe-area-inset-bottom))]",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Ù…ØªØµÙ„ Ø¨Ù‡ MetaTrader"})]}),e.jsx("span",{children:"t.me/behtarinforex"})]})})]})}function nt({signal:t}){const{id:s,symbol:n,type:r,isBuy:c,openPrice:a,volume:p,openTime:x,status:o,actions:u,liveProfit:g,livePrice:d,closeProfit:j}=t,l=i=>i!=null&&i.includes("XAU")?"Gold":i!=null&&i.includes("XAG")?"Silver":i,v=c?"bg-gradient-to-br from-green-900/40 to-green-800/20 border-green-500/30":"bg-gradient-to-br from-red-900/40 to-red-800/20 border-red-500/30",y=o==="closed"?j:g,N=y>=0,f=u&&u.length>0;return e.jsxs("div",{dir:"ltr",className:`w-[280px] rounded-2xl rounded-tl-md border ${v} overflow-hidden`,children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap text-left",children:[e.jsx("span",{className:`text-base ${c?"text-green-500":"text-red-500"}`,children:c?"ðŸŸ¢":"ðŸ”´"}),e.jsx("span",{className:"text-white font-bold",children:l(n)}),e.jsx("span",{className:`font-bold text-sm ${c?"text-green-400":"text-red-400"}`,children:c?"Buy":"Sell"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["(",D(n,a),")"]}),e.jsxs("span",{className:"text-yellow-500 font-mono text-xs",children:["#",s]})]})}),e.jsxs("div",{className:"px-3 py-1.5 flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Volume"}),e.jsxs("span",{className:"font-mono text-white text-sm",children:[p," lot"]})]}),y!=null&&e.jsx("div",{className:"px-3 py-1.5 border-t border-white/5",children:e.jsxs("div",{className:`flex justify-between items-center px-2 py-1.5 rounded-lg ${N?"bg-green-500/20":"bg-red-500/20"}`,children:[e.jsx("span",{className:"text-gray-300 text-xs",children:"P/L"}),e.jsxs("span",{className:`font-mono font-bold ${N?"text-green-400":"text-red-400"}`,children:[N?"+":"",y==null?void 0:y.toFixed(2),"$"]})]})}),f&&e.jsx("div",{className:"border-t border-white/10",children:u.map((i,m)=>e.jsx(it,{action:i,symbol:n,signalCloseProfit:t.closeProfit},m))}),e.jsxs("div",{className:"px-3 py-1 flex justify-between items-center border-t border-white/5",children:[e.jsxs("span",{className:`text-[10px] ${o==="closed"?"text-gray-500":"text-green-400"}`,children:["â— ",o==="closed"?"Closed":"Active"]}),e.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(x).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]})}function it({action:t,symbol:s,signalCloseProfit:n}){const{type:r,closedVolume:c,remainingVolume:a,profit:p,price:x,timestamp:o}=t,u=(p??0)>=0;if(r==="partial_close")return e.jsxs("div",{className:"px-3 py-2 bg-yellow-500/10 border-b border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"ðŸ“¦"}),e.jsx("span",{className:"text-gray-300",children:"Partial Close"})]}),e.jsx("span",{className:"text-gray-500 text-[10px]",children:new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("span",{className:"text-red-400",children:["-",c," lot"]}),e.jsx("span",{className:"text-gray-500",children:"â†’"}),e.jsxs("span",{className:"text-green-400",children:[a," lot"]})]}),e.jsxs("span",{className:`font-mono font-bold text-xs ${u?"text-green-400":"text-red-400"}`,children:[u?"+":"",p==null?void 0:p.toFixed(2),"$"]})]})]});if(r==="closed"){const g=n??p??0,d=g>=0;return e.jsxs("div",{className:"px-3 py-2 bg-gray-500/10 border-b border-gray-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400",children:"âœ…"}),e.jsx("span",{className:"text-gray-300",children:"Fully Closed"}),e.jsxs("span",{className:"text-gray-500",children:["(",D(s,x),")"]})]}),e.jsx("span",{className:"text-gray-500 text-[10px]",children:new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"flex items-center justify-end mt-1",children:e.jsxs("span",{className:`font-mono font-bold text-sm ${d?"text-green-400":"text-red-400"}`,children:["Total P/L: ",d?"+":"",g==null?void 0:g.toFixed(2),"$"]})})]})}return null}function at({post:t,onReplyClick:s,isHighlighted:n}){const r=t.replyTo&&t.replyTo.text;return e.jsxs("div",{id:`msg-${t.id}`,className:`bg-[#182533] rounded-xl overflow-hidden transition-all duration-500 ${r?"border-l-4 border-l-blue-500 border border-blue-500/20":"border border-white/5"} ${n?"ring-2 ring-yellow-500 bg-yellow-500/10":""}`,children:[r&&e.jsxs("div",{className:"px-3 py-2 bg-blue-500/10 border-b border-blue-500/20 cursor-pointer hover:bg-blue-500/20 transition-colors active:bg-blue-500/30 flex items-start gap-2",onClick:()=>s(t.replyTo.id),children:[e.jsx(ze,{size:14,className:"text-blue-400 rotate-180 flex-shrink-0 mt-1"}),e.jsx("div",{className:"flex-1 min-w-0 bg-[#0e1621] rounded px-2 py-1.5 border-l-2 border-blue-400",children:e.jsx("p",{className:"text-xs text-gray-400 line-clamp-4 leading-relaxed",dir:"auto",children:t.replyTo.text})}),e.jsx("span",{className:"text-[10px] text-blue-400 flex-shrink-0 mt-1",children:"â†©ï¸"})]}),e.jsx("div",{className:"p-4",children:e.jsx("pre",{className:"text-gray-200 text-sm whitespace-pre-wrap font-sans leading-relaxed",dir:"auto",children:t.text})}),(t.time||t.views)&&e.jsxs("div",{className:"px-4 py-2 border-t border-white/5 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:t.time}),t.views&&e.jsxs("span",{children:["ðŸ‘ ",t.views]})]})]})}function ot(){const t=O(),[s,n]=h.useState([]),[r,c]=h.useState(null),[a,p]=h.useState(!0),[x,o]=h.useState(!1),[u,g]=h.useState(!1),[d,j]=h.useState(null),l=h.useRef(null),v=h.useRef(null),y=()=>{var m;(m=v.current)==null||m.scrollIntoView({behavior:"smooth"})},N=h.useCallback(m=>{if(!m)return;const b=document.getElementById(`msg-${m}`);b&&(b.scrollIntoView({behavior:"smooth",block:"center"}),j(m),setTimeout(()=>j(null),2e3))},[]),f=()=>{if(l.current){const{scrollTop:m,scrollHeight:b,clientHeight:C}=l.current;g(b-m-C>100)}},i=async(m=!1)=>{m?p(!0):o(!0);try{const[b,C]=await Promise.all([Qe(30),Ze()]);b&&b.length>0&&(n(b),m&&setTimeout(y,150)),C&&c(C)}catch(b){console.error("Error:",b)}finally{p(!1),o(!1)}};return h.useEffect(()=>{i(!0);const m=setInterval(()=>i(!1),5e3);return()=>clearInterval(m)},[]),e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621] safe-top relative",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:e.jsx(_,{size:18,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:(r==null?void 0:r.title)||"Signal Channel"}),e.jsxs("div",{className:"text-[11px] text-gray-400 flex items-center gap-2",children:[e.jsxs("span",{children:["@",(r==null?void 0:r.username)||"behtarinforex"]}),(r==null?void 0:r.memberCount)>0&&e.jsxs("span",{className:"text-blue-400",children:["â€¢ ",r.memberCount.toLocaleString()," Ø¹Ø¶Ùˆ"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(!1),disabled:x,className:"p-2 hover:bg-white/10 rounded-full transition disabled:opacity-50",children:x?e.jsx(R,{size:18,className:"text-gray-400 animate-spin"}):e.jsx(Me,{size:18,className:"text-gray-400"})}),e.jsx("a",{href:`https://t.me/${(r==null?void 0:r.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-blue-600",children:"Join"})]})]}),e.jsx("div",{ref:l,onScroll:f,className:"flex-1 overflow-y-auto p-3 space-y-3",children:a?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(R,{size:32,className:"text-blue-400 animate-spin"})}):s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-10",children:"Ù‡ÛŒÚ† Ù¾ÛŒØ§Ù…ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center py-2",children:e.jsx("a",{href:`https://t.me/${(r==null?void 0:r.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 text-xs hover:underline",children:"â† Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…"})}),s.map((m,b)=>e.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.01},children:e.jsx(at,{post:m,onReplyClick:N,isHighlighted:d===m.id})},m.id)),e.jsx("div",{ref:v})]})}),u&&e.jsx("button",{onClick:y,className:"absolute bottom-24 right-4 p-3 bg-[#17212b] border border-white/10 rounded-full shadow-lg hover:bg-[#1c2733] transition z-20",children:e.jsx(Se,{size:20,className:"text-gray-400"})}),e.jsx("div",{className:"bg-[#17212b] border-t border-[#0e1621] p-3 pb-[max(0.75rem,env(safe-area-inset-bottom))]",children:e.jsxs("a",{href:`https://t.me/${(r==null?void 0:r.username)||"behtarinforex"}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl py-3 text-white font-medium",children:[e.jsx(_,{size:18}),e.jsx("span",{children:"Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„"})]})})]})}function lt(){const{theme:t}=ce();return e.jsx("div",{className:"bg-[#0e1621] min-h-screen w-full flex justify-center items-start",children:e.jsxs("div",{className:"min-h-screen w-full max-w-lg mx-auto overflow-hidden bg-[#0e1621]",children:[t===B.TELEGRAM&&e.jsx(rt,{}),t===B.META5&&e.jsx(ot,{})]})})}const ne="https://behtarin-forex-backend.onrender.com/api";function ct(){const t=O(),[s,n]=h.useState("signal"),[r,c]=h.useState(""),[a,p]=h.useState(!1),[x,o]=h.useState(!1),[u,g]=h.useState(null),[d,j]=h.useState({symbol:"XAUUSD",tradeType:"buy",entries:"",stopLoss:"",targets:""}),[l,v]=h.useState(""),y=i=>{i.preventDefault(),r.length>0&&p(!0)},N=async()=>{o(!0),g(null);try{const m=await(await fetch(`${ne}/telegram/send-signal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,password:r})})).json();m.success?(g({type:"success",text:"Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…"}),j({symbol:"XAUUSD",tradeType:"buy",entries:"",stopLoss:"",targets:""})):g({type:"error",text:m.error||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„"})}catch{g({type:"error",text:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±"})}finally{o(!1)}},f=async()=>{o(!0),g(null);try{const m=await(await fetch(`${ne}/telegram/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:l,password:r})})).json();m.success?(g({type:"success",text:"Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…"}),v("")):g({type:"error",text:m.error||"Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„"})}catch{g({type:"error",text:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±"})}finally{o(!1)}};return a?e.jsxs("div",{className:"min-h-screen bg-[#0e1621] safe-top",children:[e.jsx("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t("/login"),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-[15px]",children:"ðŸ” Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª"}),e.jsx("div",{className:"text-[11px] text-gray-400",children:"Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ú©Ø§Ù†Ø§Ù„"})]})]})}),e.jsxs("div",{className:"flex border-b border-white/10",children:[e.jsxs("button",{onClick:()=>n("signal"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition ${s==="signal"?"text-blue-400 border-b-2 border-blue-400":"text-gray-500"}`,children:[e.jsx(Ie,{size:16})," Ø³ÛŒÚ¯Ù†Ø§Ù„"]}),e.jsxs("button",{onClick:()=>n("message"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition ${s==="message"?"text-blue-400 border-b-2 border-blue-400":"text-gray-500"}`,children:[e.jsx($e,{size:16})," Ù¾ÛŒØ§Ù…"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[u&&e.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-xl flex items-center gap-2 ${u.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[u.type==="success"?e.jsx(Ce,{size:18}):e.jsx(xe,{size:18}),e.jsx("span",{className:"text-sm",children:u.text})]}),s==="signal"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†Ù…Ø§Ø¯"}),e.jsxs("select",{value:d.symbol,onChange:i=>j({...d,symbol:i.target.value}),className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD (Ø·Ù„Ø§)"}),e.jsx("option",{value:"EURUSD",children:"EURUSD (ÛŒÙˆØ±Ùˆ/Ø¯Ù„Ø§Ø±)"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD (Ù¾ÙˆÙ†Ø¯/Ø¯Ù„Ø§Ø±)"}),e.jsx("option",{value:"XAGUSD",children:"XAGUSD (Ù†Ù‚Ø±Ù‡)"}),e.jsx("option",{value:"USDJPY",children:"USDJPY (Ø¯Ù„Ø§Ø±/ÛŒÙ†)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†ÙˆØ¹ Ù…Ø¹Ø§Ù…Ù„Ù‡"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>j({...d,tradeType:"buy"}),className:`flex-1 py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition ${d.tradeType==="buy"?"bg-green-500 text-white":"bg-[#17212b] text-gray-400 border border-white/10"}`,children:[e.jsx(q,{size:18})," Ø®Ø±ÛŒØ¯ (BUY)"]}),e.jsxs("button",{onClick:()=>j({...d,tradeType:"sell"}),className:`flex-1 py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition ${d.tradeType==="sell"?"bg-red-500 text-white":"bg-[#17212b] text-gray-400 border border-white/10"}`,children:[e.jsx(W,{size:18})," ÙØ±ÙˆØ´ (SELL)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù†Ù‚Ø§Ø· ÙˆØ±ÙˆØ¯"}),e.jsx("input",{type:"text",value:d.entries,onChange:i=>j({...d,entries:i.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2650 Ùˆ 2648",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ø§Ø³ØªØ§Ù¾ Ù„Ø§Ø³"}),e.jsx("input",{type:"text",value:d.stopLoss,onChange:i=>j({...d,stopLoss:i.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2645",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"ØªØ§Ø±Ú¯Øªâ€ŒÙ‡Ø§ (Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯)"}),e.jsx("input",{type:"text",value:d.targets,onChange:i=>j({...d,targets:i.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 2655, 2660, 2665, 2670",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"})]}),e.jsx("button",{onClick:N,disabled:x||!d.entries||!d.stopLoss||!d.targets,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 text-white font-medium py-4 rounded-xl transition flex items-center justify-center gap-2",children:x?e.jsx(R,{size:20,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(_,{size:18})," Ø§Ø±Ø³Ø§Ù„ Ø³ÛŒÚ¯Ù†Ø§Ù„"]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Ù…ØªÙ† Ù¾ÛŒØ§Ù…"}),e.jsx("textarea",{value:l,onChange:i=>v(i.target.value),placeholder:"Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...",rows:6,className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 resize-none",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["âœ… ØªØ§Ø±Ú¯Øª Û± Ø²Ø¯Ù‡ Ø´Ø¯!","âœ… ØªØ§Ø±Ú¯Øª Û² Ø²Ø¯Ù‡ Ø´Ø¯!","âŒ Ø§Ø³ØªØ§Ù¾ Ø²Ø¯Ù‡ Ø´Ø¯","ðŸ“Š Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø§Ø²Ø§Ø±...","ðŸ”’ Ø§Ø³ØªØ§Ù¾ Ø¨Ù‡ ÙˆØ±ÙˆØ¯ Ù…Ù†ØªÙ‚Ù„ Ø´Ø¯"].map(i=>e.jsx("button",{onClick:()=>v(l+(l?`
`:"")+i),className:"px-3 py-1.5 bg-[#17212b] border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/5",children:i},i))})]}),e.jsx("button",{onClick:f,disabled:x||!l.trim(),className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 text-white font-medium py-4 rounded-xl transition flex items-center justify-center gap-2",children:x?e.jsx(R,{size:20,className:"animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(_,{size:18})," Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…"]})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-[#0e1621] flex flex-col items-center justify-center p-6",children:e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Ue,{size:32,className:"text-blue-400"})}),e.jsx("h1",{className:"text-white text-xl font-bold",children:"Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("input",{type:"password",value:r,onChange:i=>c(i.target.value),placeholder:"Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±",className:"w-full bg-[#17212b] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",dir:"ltr"}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 rounded-xl transition",children:"ÙˆØ±ÙˆØ¯"})]}),e.jsx("button",{onClick:()=>t("/login"),className:"w-full mt-4 text-gray-500 text-sm hover:text-gray-400",children:"Ø¨Ø§Ø²Ú¯Ø´Øª"})]})})}function dt(){const t=O(),[s,n]=h.useState(()=>{try{const x=localStorage.getItem("behtarin_closed_signals");return x?JSON.parse(x):[]}catch{return[]}}),r=s.reduce((x,o)=>x+(o.totalProfit||0),0),c=s.reduce((x,o)=>{const u=new Date(o.closeTime||o.openTime).toLocaleDateString("fa-IR");return x[u]||(x[u]=[]),x[u].push(o),x},{}),a=()=>{confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ ØªÙ…Ø§Ù… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯.")&&(localStorage.removeItem("behtarin_closed_signals"),n([]))},p=x=>x!=null&&x.includes("XAU")?"Gold":x!=null&&x.includes("XAG")?"Silver":x!=null&&x.includes("EUR")?"EUR/USD":x!=null&&x.includes("GBP")?"GBP/USD":(x==null?void 0:x.replace(".ec",""))||"Unknown";return e.jsxs("div",{className:"h-screen flex flex-col bg-[#0e1621]",children:[e.jsxs("div",{className:"bg-[#17212b] text-white p-3 pt-[max(0.75rem,env(safe-area-inset-top))] flex items-center justify-between shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-1 hover:bg-white/10 rounded-lg transition",children:e.jsx(H,{size:22,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-[15px] flex items-center gap-2",children:[e.jsx(J,{size:18}),"ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø¹Ø§Ù…Ù„Ø§Øª"]}),e.jsxs("div",{className:"text-[11px] text-gray-400",children:[s.length," Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡"]})]})]}),s.length>0&&e.jsx("button",{onClick:a,className:"p-2 hover:bg-red-500/20 rounded-lg transition",children:e.jsx(Be,{size:18,className:"text-red-400"})})]}),s.length>0&&e.jsx("div",{className:`px-4 py-3 ${r>=0?"bg-green-500/10":"bg-red-500/10"} border-b border-[#0e1621]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Ù…Ø¬Ù…ÙˆØ¹ Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†:"}),e.jsxs("span",{className:`font-bold text-lg ${r>=0?"text-green-400":"text-red-400"}`,children:[r>=0?"+":"",r.toFixed(2),"$"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(J,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{children:"Ù‡Ù†ÙˆØ² Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒØ§ÛŒ Ø¨Ø³ØªÙ‡ Ù†Ø´Ø¯Ù‡"})]}):Object.entries(c).sort(([x],[o])=>new Date(o)-new Date(x)).map(([x,o])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pe,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:x})]}),e.jsx("div",{className:"space-y-2",children:o.map((u,g)=>e.jsxs(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-[#182533] rounded-xl p-3 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${u.isBuy?"bg-green-500/20":"bg-red-500/20"}`,children:u.isBuy?e.jsx(q,{size:14,className:"text-green-400"}):e.jsx(W,{size:14,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium text-sm",children:p(u.symbol)}),e.jsx("span",{className:`ml-2 text-xs ${u.isBuy?"text-green-400":"text-red-400"}`,children:u.isBuy?"BUY":"SELL"})]})]}),e.jsxs("span",{className:"text-gray-500 text-xs font-mono",children:["#",u.id]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Entry"}),e.jsx("span",{className:"text-white",children:D(u.openPrice,u.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Close"}),e.jsx("span",{className:"text-white",children:D(u.closePrice,u.symbol)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"Volume"}),e.jsxs("span",{className:"text-white",children:[u.volume," lot"]})]})]}),e.jsx("div",{className:`text-center py-2 rounded-lg ${(u.totalProfit||0)>=0?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsxs("span",{className:`font-bold ${(u.totalProfit||0)>=0?"text-green-400":"text-red-400"}`,children:[(u.totalProfit||0)>=0?"+":"",(u.totalProfit||0).toFixed(2),"$"]})}),u.actions&&u.actions.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-white/5",children:[e.jsx("div",{className:"text-[10px] text-gray-500 mb-1",children:"Ø¹Ù…Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§:"}),e.jsx("div",{className:"space-y-1",children:u.actions.map((d,j)=>{var l;return e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsxs("span",{className:"text-gray-400",children:[d.type==="partial"?"Partial Close":"Full Close"," (",d.volume," lot)"]}),e.jsxs("span",{className:d.profit>=0?"text-green-400":"text-red-400",children:[d.profit>=0?"+":"",(l=d.profit)==null?void 0:l.toFixed(2),"$"]})]},j)})})]})]},u.id+"-"+g))})]},x))})]})}const ie=60,ae=150;function xt({notifications:t,onDismiss:s}){return e.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-2 max-w-sm w-full pointer-events-none",children:e.jsx(oe,{children:t.map(n=>e.jsx(L.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:"pointer-events-auto",children:e.jsx(ut,{notification:n,onDismiss:s})},n.id))})})}function ut({notification:t,onDismiss:s}){var y,N;const{id:n,type:r,event:c,data:a,timestamp:p}=t,o=(()=>{var f,i;switch(c){case"position_opened":return{icon:(f=a.type)!=null&&f.includes("BUY")?q:W,color:(i=a.type)!=null&&i.includes("BUY")?"green":"red",title:"ðŸš€ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø² Ø´Ø¯!",titleEn:"New Position Opened!"};case"position_closed":return{icon:Le,color:a.profit>=0?"green":"red",title:a.profit>=0?"âœ… Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø§ Ø³ÙˆØ¯ Ø¨Ø³ØªÙ‡ Ø´Ø¯!":"âŒ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø§ Ø¶Ø±Ø± Ø¨Ø³ØªÙ‡ Ø´Ø¯!",titleEn:a.profit>=0?"Position Closed (Profit)":"Position Closed (Loss)"};case"position_updated":return{icon:Ee,color:"yellow",title:"ðŸ“ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯",titleEn:"Position Updated"};case"order_placed":return{icon:V,color:"blue",title:"ðŸ“‹ Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯",titleEn:"Order Placed"};default:return{icon:V,color:"gray",title:"Trade Update",titleEn:"Trade Update"}}})(),u=o.icon,g=(y=a.type)==null?void 0:y.includes("BUY"),d=parseFloat(a.openPrice)||0,j=a.stopLoss||et(a.symbol,d,a.type,ie),l=a.takeProfit||tt(a.symbol,d,a.type,ae),v={green:"bg-green-500/10 border-green-500/30 text-green-500",red:"bg-red-500/10 border-red-500/30 text-red-500",yellow:"bg-yellow-500/10 border-yellow-500/30 text-yellow-500",blue:"bg-blue-500/10 border-blue-500/30 text-blue-500",gray:"bg-gray-500/10 border-gray-500/30 text-gray-500"};return e.jsxs("div",{className:`bg-[#1a1a1a] border ${v[o.color].split(" ")[1]} rounded-xl shadow-2xl overflow-hidden backdrop-blur-lg`,children:[e.jsxs("div",{className:`px-4 py-2 flex items-center justify-between ${v[o.color].split(" ")[0]}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{size:18,className:v[o.color].split(" ")[2]}),e.jsx("span",{className:"font-bold text-sm text-white",children:o.title})]}),e.jsx("button",{onClick:()=>s(n),className:"p-1 hover:bg-white/10 rounded transition",children:e.jsx(xe,{size:14,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-xl text-white",children:a.symbol}),e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${g?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:g?"BUY":"SELL"})]}),a.volume&&e.jsxs("span",{className:"text-sm text-gray-400 font-mono",children:[a.volume," lot"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-black/40 rounded-lg p-2 border border-white/10",children:[e.jsx("div",{className:"text-gray-400 text-[10px] uppercase mb-1",children:"Entry"}),e.jsx("div",{className:"font-mono text-white font-bold",children:D(a.symbol,d)})]}),e.jsxs("div",{className:"bg-red-500/10 rounded-lg p-2 border border-red-500/20",children:[e.jsxs("div",{className:"text-red-400 text-[10px] uppercase mb-1 flex items-center justify-between",children:[e.jsx("span",{children:"SL"}),e.jsxs("span",{className:"text-[8px] text-red-300",children:[ie," pip"]})]}),e.jsx("div",{className:"font-mono text-red-400 font-bold",children:D(a.symbol,j)})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-lg p-2 border border-green-500/20",children:[e.jsxs("div",{className:"text-green-400 text-[10px] uppercase mb-1 flex items-center justify-between",children:[e.jsx("span",{children:"TP"}),e.jsxs("span",{className:"text-[8px] text-green-300",children:[ae," pip"]})]}),e.jsx("div",{className:"font-mono text-green-400 font-bold",children:D(a.symbol,l)})]})]}),a.profit!==void 0&&e.jsxs("div",{className:`text-center py-2 rounded-lg ${a.profit>=0?"bg-green-500/20":"bg-red-500/20"}`,children:[a.currentPrice&&e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Current: ",e.jsx("span",{className:"text-yellow-500 font-mono",children:D(a.symbol,a.currentPrice)})]}),e.jsxs("span",{className:`font-mono font-bold text-lg ${a.profit>=0?"text-green-500":"text-red-500"}`,children:[a.profit>=0?"+":"",(N=a.profit)==null?void 0:N.toFixed(2),"$"]})]}),e.jsx("div",{className:"text-[10px] text-gray-500 text-right",children:new Date(p).toLocaleTimeString("fa-IR")})]})]})}function mt(){const{notifications:t,connected:s,dismissNotification:n}=me();return e.jsxs("div",{className:"antialiased",children:[e.jsx(xt,{notifications:t,onDismiss:n}),s&&e.jsxs("div",{className:"fixed bottom-4 left-4 z-50 flex items-center gap-2 bg-green-500/20 text-green-500 text-xs px-3 py-1.5 rounded-full border border-green-500/30",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live Connected"]}),e.jsxs(fe,{children:[e.jsx(I,{path:"/login",element:e.jsx(Ye,{})}),e.jsx(I,{path:"/dashboard",element:e.jsx(lt,{})}),e.jsx(I,{path:"/admin",element:e.jsx(ct,{})}),e.jsx(I,{path:"/history",element:e.jsx(dt,{})}),e.jsx(I,{path:"*",element:e.jsx(ge,{to:"/login",replace:!0})})]})]})}function ht(){return e.jsx(je,{children:e.jsx(mt,{})})}G.createRoot(document.getElementById("root")).render(e.jsx(be.StrictMode,{children:e.jsx(ye,{children:e.jsx(ht,{})})}));
